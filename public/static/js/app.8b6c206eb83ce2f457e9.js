webpackJsonp([12],{"3vVi":function(e,t){},LQr1:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("//Fk"),o=n.n(a),r=n("7+uW"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var u=n("VU/8")({name:"App"},i,!1,function(e){n("LQr1")},null,null).exports,c=n("/ocq");r.default.use(c.a);var s=new c.a({routes:[{path:"/",redirect:"/Login",component:function(e){return n.e(1).then(function(){var t=[n("15F1")];e.apply(null,t)}.bind(this)).catch(n.oe)},children:[{path:"/homepage",component:function(e){return Promise.all([n.e(0),n.e(9)]).then(function(){var t=[n("Qfom")];e.apply(null,t)}.bind(this)).catch(n.oe)},meta:{admin:!0}},{path:"/instrument/:id",component:function(e){return Promise.all([n.e(0),n.e(3)]).then(function(){var t=[n("BRub")];e.apply(null,t)}.bind(this)).catch(n.oe)},meta:{admin:!0}},{path:"/drug/:id",component:function(e){return Promise.all([n.e(0),n.e(10)]).then(function(){var t=[n("DsdM")];e.apply(null,t)}.bind(this)).catch(n.oe)},meta:{admin:!0}},{path:"/operation",component:function(e){return Promise.all([n.e(0),n.e(4)]).then(function(){var t=[n("Y2MW")];e.apply(null,t)}.bind(this)).catch(n.oe)},meta:{admin:!0}},{path:"/received",component:function(e){return Promise.all([n.e(0),n.e(8)]).then(function(){var t=[n("gza8")];e.apply(null,t)}.bind(this)).catch(n.oe)},meta:{admin:!0}},{path:"/return",component:function(e){return n.e(5).then(function(){var t=[n("Bt7H")];e.apply(null,t)}.bind(this)).catch(n.oe)},meta:{admin:!0}},{path:"/records",component:function(e){return n.e(7).then(function(){var t=[n("rnZI")];e.apply(null,t)}.bind(this)).catch(n.oe)},meta:{admin:!0}},{path:"/manifest",component:function(e){return Promise.all([n.e(0),n.e(6)]).then(function(){var t=[n("XyqY")];e.apply(null,t)}.bind(this)).catch(n.oe)},meta:{a:!0}}]},{path:"/Login",component:function(e){return Promise.all([n.e(0),n.e(2)]).then(function(){var t=[n("xJsL")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/*",redirect:"/Login"}]}),l=n("zL8q"),p=n.n(l),h=(n("tvR6"),n("mtWM")),d=n.n(h),m=n("NYxO");r.default.use(m.a);var f=new m.a.Store({state:{sideIndex:1,showSideBar:!0,operationPhotoPath:"http://drug-control.jootu.tech/storage/",protocol:"",host:""},getters:{side:function(e){return e.showSideBar}},mutations:{increment:function(e,t){e.showSideBar=t}}});n("j1ja"),n("3vVi");r.default.config.productionTip=!1,r.default.use(p.a),r.default.use(m.a),r.default.prototype.$axios=d.a,s.beforeEach(function(e,t,n){"/Login"==e.path?n():(f.state.host=window.location.host,f.state.protocol=window.location.protocol+"//",localStorage.getItem("user")?e.meta.admin&&0===JSON.parse(localStorage.getItem("user")).is_admin?n():e.meta.a&&1===JSON.parse(localStorage.getItem("user")).is_admin?n():(p.a.Message({type:"warning",message:"没有权限访问,请先登录!",duration:"3000"}),n({path:"/Login"})):(p.a.Message({type:"warning",message:"登录信息已过期，请重新登录!",duration:"3000"}),n({path:"/Login"})))}),d.a.interceptors.request.use(function(e){return localStorage.getItem("user")&&(e.headers.Authorization="Bearer "+JSON.parse(localStorage.getItem("user")).token),e},function(e){return o.a.reject(e)}),d.a.interceptors.response.use(function(e){return 401==e.data.status&&(localStorage.removeItem("user"),p.a.Message({type:"warning",message:"登录信息已过期，请重新登录!",duration:"3000"}),s.replace({path:"/login",query:{redirect:s.currentRoute.fullPath}})),e},function(e){if(e.response)switch(e.response.status){case 401:localStorage.removeItem("user"),p.a.Message({type:"warning",message:"登录信息已过期，请重新登录!",duration:"3000"}),s.replace({path:"/login",query:{redirect:s.currentRoute.fullPath}})}return o.a.reject(e.response.data)}),d.a.defaults.baseURL="api/",new r.default({el:"#app",router:s,store:f,components:{App:u},template:"<App/>"})},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.8b6c206eb83ce2f457e9.js.map