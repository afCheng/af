webpackJsonp([21],{NN74:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:function(){return{drillLists:[],content:"",options:[{value:"全部",label:"全部"},{value:"我参与的",label:"我参与的"}],value:"全部"}},methods:{randomColor:function(){var t=["#a1eaff","#f2c840","#f89999","#50e3c2","#e38df5","#80c6f7"];return t[Math.floor(Math.random()*t.length)]},getSearch:function(t){"全部"==t?this.getAllHistory():this.getMyHistory()},getAllHistory:function(){var t=this;this.drillLists=[];var e={};this.content&&this.$set(e,"name",this.content),this.$axios.post("/api/design-history",e).then(function(e){t.drillLists=e.data.data}).catch(function(t){console.log(t)})},getMyHistory:function(){var t=this;this.drillLists=[];var e=JSON.parse(localStorage.user).id;this.$axios.post("/api/design-history-my",{name:this.content,id:e}).then(function(e){t.drillLists=e.data.data}).catch(function(t){console.log(t)})},downloadDrillText:function(t){var e=this;console.log(1111),console.log(window.location.host),this.$axios.post("/api/word",{design_id:t}).then(function(i){"成功"==i.data.message&&window.open("http://"+window.location.host+e.$store.state.download_path+"?design_id="+t,"_parent")}).catch(function(t){console.log(t)})}},created:function(){this.$store.state.showHeader="4",1==this.$route.params.id?(this.value="我参与的",this.getMyHistory()):2==this.$route.params.id&&(this.value="全部",this.getAllHistory())},filters:{drillStatus:function(t){return 0==t?"开始演练":1==t?"正在参加的演练":2==t?"下载文档":void 0}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"HistoryS clearfix"},[i("div",{staticClass:"HistoryTop"},[i("el-select",{model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),i("div",{staticClass:"btn"},[i("button",{on:{click:function(e){t.getSearch(t.value)}}},[t._v("搜索")])]),t._v(" "),i("div",{staticClass:"ipt"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{type:"text"},domProps:{value:t.content},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.getSearch(t.value)},input:function(e){e.target.composing||(t.content=e.target.value)}}})])],1),t._v(" "),i("div",{staticClass:"enterableHome"},[i("ul",t._l(t.drillLists,function(e,s){return i("li",{key:s,style:"border-bottom: 3px solid "+t.randomColor()},[t._m(0,!0),t._v(" "),i("div",{staticClass:"right"},[i("p",[t._v(t._s(e.name))]),t._v(" "),i("p",{staticClass:"enter_detail"},[t._v(t._s(e.description))]),t._v(" "),i("p",{staticClass:"enter_time"},[t._v(t._s(e.design_time))])]),t._v(" "),i("div",{staticClass:"btn"},[i("el-button",{on:{click:function(i){t.downloadDrillText(e.id)}}},[t._v(t._s(t._f("drillStatus")(e.status)))])],1)])}))])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left"},[e("p",[this._v("演练名称: ")]),this._v(" "),e("p",{staticClass:"enter_detail"},[this._v("演练详情: ")]),this._v(" "),e("p",{staticClass:"enter_time"},[this._v("演练时间: ")])])}]};var o=i("VU/8")(s,n,!1,function(t){i("OuxW")},null,null);e.default=o.exports},OuxW:function(t,e){}});
//# sourceMappingURL=21.c136085d54d3f999b09a.js.map