webpackJsonp([18],{"0XFB":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e("mvHQ"),s=e.n(r),i=e("pFYg"),o=e.n(i),c={name:"enterableHome",data:function(){return{myDrillLists:[],myShow:!1,drillLists:[],myId:""}},methods:{randomColor:function(){var t=["#a1eaff","#f2c840","#f89999","#50e3c2","#e38df5","#80c6f7"];return t[Math.floor(Math.random()*t.length)]},getMyRehearse:function(){var t=this;this.$axios.post("/api/design-me",{id:this.myId}).then(function(a){var e=[];for(var r in a.data.data)a.data.data[r]!=a.data.data.score_user&&e.push(a.data.data[r]);if(0!=a.data.data.score_user.length)for(r=0;r<a.data.data.score_user.length;r++)e.push(a.data.data.score_user[r]);console.log(e),t.myDrillLists=t.unique(e),null===a.data.data?t.myShow=!1:t.myShow=!0}).catch(function(t){})},getWatchRehearse:function(){var t=this;this.$axios.post("/api/my-look",{id:this.myId}).then(function(a){t.drillLists=a.data.data,t.$store.state.status&&window.scrollTo(0,t.$refs.look.offsetTop)}).catch(function(t){})},startDrill:function(t,a){var e=this;localStorage.drill_project=t;var r=JSON.parse(localStorage.user).id;0===a?this.$axios.post("/api/my-character",{user_id:r,design_id:t}).then(function(t){if("成功"==t.data.message)if(0!=t.data.data.score_user.length)if(void 0!=t.data.data[0]){if(0===t.data.data[0].character)e.$router.push("/direct");else if(1===t.data.data[0].character)localStorage.roles="参演",e.$router.push("/Participate");else if(2===t.data.data[0].character)for(var a in localStorage.roles="评分",e.$router.push("/Participate"),t.data.data.score_user){if(t.data.data.score_user[a].score_user==e.myId){localStorage.roles="评分点评",e.$router.push("/Participate");break}localStorage.roles="评分",e.$router.push("/Participate")}}else localStorage.roles="点评",e.$router.push("/Participate");else 0===t.data.data[0].character?e.$router.push("/direct"):1===t.data.data[0].character?(localStorage.roles="参演",e.$router.push("/Participate")):2===t.data.data[0].character&&(localStorage.roles="评分",e.$router.push("/Participate"))}).catch(function(t){}):1===a&&this.$axios.post("/api/my-character",{user_id:r,design_id:t}).then(function(t){if("成功"==t.data.message)if(""!=t.data.data.score_user)if(void 0!=t.data.data[0]){if(0===t.data.data[0].character)e.$router.push("/direct/start");else if(1===t.data.data[0].character)localStorage.roles="参演",e.$router.push("/practiceStart");else if(2===t.data.data[0].character)for(var a in localStorage.roles="评分",e.$router.push("/practiceStart"),t.data.data.score_user){if(t.data.data.score_user[a].score_user==e.myId){localStorage.roles="评分点评",e.$router.push("/practiceStart");break}localStorage.roles="评分",e.$router.push("/practiceStart")}}else localStorage.roles="点评",e.$router.push("/practiceStart");else 0===t.data.data[0].character?e.$router.push("/direct/start"):1===t.data.data[0].character?(localStorage.roles="参演",e.$router.push("/practiceStart")):2===t.data.data[0].character&&(localStorage.roles="评分",e.$router.push("/practiceStart"))}).catch(function(t){console.log(t)})},lookDrill:function(t,a){var e=this;localStorage.drill_project=t,this.$axios.post("/api/look-status",{design_id:t}).then(function(t){1===a&&(e.$router.push("/practiceStart"),localStorage.roles="观看")})},unique:function(t){var a={};return t.filter(function(t,e,r){return!a.hasOwnProperty((void 0===t?"undefined":o()(t))+s()(t))&&(a[(void 0===t?"undefined":o()(t))+s()(t)]=!0)})}},created:function(){this.$store.state.showHeader="3",this.myId=JSON.parse(localStorage.user).id,this.getMyRehearse(),this.getWatchRehearse()},mounted:function(){this.getMyRehearse(),this.getWatchRehearse()},filters:{myDrillStatus:function(t){return 0==t?"开始演练":1==t?"正在参加的演练":2==t?"演练结束":void 0},lookDrillStatus:function(t){return 0==t?"未开始":1==t?"观看演练":2==t?"演练结束":void 0}}},l={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"enterableHome"},[e("div",[t._m(0),t._v(" "),t.myShow?t._e():e("div",{staticClass:"yet"},[t._v("暂未有我参与的演练项目")]),t._v(" "),e("ul",t._l(t.myDrillLists,function(a,r){return a.status<2?e("li",{key:r,style:"border-bottom: 3px solid "+t.randomColor()},[t._m(1,!0),t._v(" "),e("div",{staticClass:"right"},[e("p",[t._v(t._s(a.name))]),t._v(" "),e("p",{staticClass:"enter_detail"},[t._v(t._s(a.description))]),t._v(" "),e("p",{staticClass:"enter_time"},[t._v(t._s(a.design_time))])]),t._v(" "),e("div",{staticClass:"btn"},[e("el-button",{on:{click:function(e){t.startDrill(a.id,a.status)}}},[t._v(t._s(t._f("myDrillStatus")(a.status)))])],1)]):t._e()}))]),t._v(" "),e("div",{ref:"look"},[t._m(2),t._v(" "),e("ul",t._l(t.drillLists,function(a,r){return a.status<2?e("li",{key:r,style:"border-bottom: 3px solid "+t.randomColor()},[t._m(3,!0),t._v(" "),e("div",{staticClass:"right"},[e("p",[t._v(t._s(a.name))]),t._v(" "),e("p",{staticClass:"enter_detail"},[t._v(t._s(a.description))]),t._v(" "),e("p",{staticClass:"enter_time"},[t._v(t._s(a.design_time))])]),t._v(" "),e("div",{staticClass:"btn"},[e("el-button",{on:{click:function(e){t.lookDrill(a.id,a.status)}}},[t._v(t._s(t._f("lookDrillStatus")(a.status)))])],1)]):t._e()}))])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("h3",[a("span",[this._v("我参与的演练项目")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"left"},[a("p",[this._v("演练名称: ")]),this._v(" "),a("p",{staticClass:"enter_detail"},[this._v("演练详情: ")]),this._v(" "),a("p",{staticClass:"enter_time"},[this._v("演练时间: ")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",[a("span",[this._v("可观看的演练项目")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"left"},[a("p",[this._v("演练名称: ")]),this._v(" "),a("p",{staticClass:"enter_detail"},[this._v("演练详情: ")]),this._v(" "),a("p",{staticClass:"enter_time"},[this._v("演练时间: ")])])}]};var n=e("VU/8")(c,l,!1,function(t){e("DMzW")},null,null);a.default=n.exports},DMzW:function(t,a){}});
//# sourceMappingURL=18.ac1a52e6d6da636e8ffb.js.map