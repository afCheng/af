webpackJsonp([11],{TBu0:function(t,e){},wcYg:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),n=a.n(s),i=a("pFYg"),o=a.n(i),r={data:function(){var t=this;return{ruleForm:{addregion:"",adddept:"",name:"",pass:"",checkPass:""},rules2:{pass:[{required:!0,validator:function(e,a,s){""===a?s(new Error("请输入密码")):(""!==t.ruleForm.checkPass&&t.$refs.ruleForm.validateField("checkPass"),s())},trigger:"blur"}],checkPass:[{required:!0,validator:function(e,a,s){""===a?s(new Error("请再次输入密码")):a!==t.ruleForm.pass?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}],addregion:[{required:!0,message:"请选择地区",trigger:"blur"}],adddept:[{required:!0,message:"请选择部门",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}]},myShow:!1,isShow:!1,currentPage:1,regions:["全部"],region:"地区",departs:["全部"],dept:"部门",departss:["全部"],depts:"部门",content:"",addRegions:[],addDepts:[],lists:[],opt:[{view:"查看",edit:"编辑",del:"删除"}],total:0,loading:!1}},methods:{getAdd:function(t){var e=this,a=[];this.$axios.post("/api/section-list",{section_one:t}).then(function(s){if(t)e.addDepts=s.data.data.data;else{for(var n in s.data.data.data)a.push(s.data.data.data[n].section_one);e.addRegions=e.unique(a)}}).catch(function(t){console.log(t)})},search:function(t){var e=this;this.loading=!0;var a=["全部"];this.departs=["全部"],this.lists=[];var s={number:10,page:t};this.region&&"地区"!==this.region&&"全部"!==this.region&&this.$set(s,"section_one",this.region),this.dept&&"部门"!==this.dept&&"全部"!==this.dept&&this.$set(s,"section_two",this.dept),this.content&&this.$set(s,"name",this.content),this.$axios.post("/api/section",s).then(function(t){null!=t.data.data?(e.lists=t.data.data.data,e.total=t.data.data.total,e.myShow=!1):(e.myShow=!0,e.total=0),e.region&&"地区"!==e.region&&"全部"!==e.region?e.$axios.post("/api/section-list",{section_one:e.region}).then(function(t){for(var s in t.data.data.data)a.push(t.data.data.data[s].section_two);e.departs=e.unique(a)}).catch(function(t){console.log(t)}):"全部"!=e.region&&"地区"!=e.region||e.$axios.post("/api/section-list").then(function(t){for(var s in t.data.data.data)a.push(t.data.data.data[s].section_two);e.departs=e.unique(a)}).catch(function(t){console.log(t)}),e.loading=!1}).catch(function(t){console.log(t)})},changeReg:function(t){var e=this,a=["全部"];this.departs=[],this.dept="";var s={};"全部"!==t&&this.$set(s,"section_one",t),this.$axios.post("/api/section-list",s).then(function(t){for(var s in t.data.data.data)a.push(t.data.data.data[s].section_two);e.departs=e.unique(a),e.search(e.currentPage)}).catch(function(t){console.log(t)})},changeDept:function(t){var e=this,a=["全部"];this.departss=[],this.depts="";var s={};"全部"!==t&&this.$set(s,"section_two",t),this.$axios.post("/api/section-list",s).then(function(t){for(var s in t.data.data.data)a.push(t.data.data.data[s].section_two);e.departs=e.unique(a),e.search(e.currentPage)}).catch(function(t){console.log(t)})},deltPer:function(t){var e=this;this.$confirm("此操作将永久删除该人员, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$axios.post("/api/user-del",{id:t}).then(function(t){"成功"===t.data.message?(e.$message({message:"删除成功",type:"success"}),e.search(e.currentPage)):"该人员参与在某个演练项目中,无法删除"===t.data.message?e.$message.error("该人员正在进行演练，请勿删除"):e.$message.error("删除失败")}).catch(function(t){console.log(t)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},getRegDep:function(){var t=this,e=["全部"],a=["全部"];this.$axios.post("/api/section-list").then(function(s){for(var n in s.data.data.data)e.push(s.data.data.data[n].section_one),a.push(s.data.data.data[n].section_two);t.regions=t.unique(e),t.departs=t.unique(a)}).catch(function(t){console.log(t)})},unique:function(t){var e={};return t.filter(function(t,a,s){return!e.hasOwnProperty((void 0===t?"undefined":o()(t))+n()(t))&&(e[(void 0===t?"undefined":o()(t))+n()(t)]=!0)})},getPerson:function(){var t=this;this.$axios.post("/api/section",{number:10,page:1}).then(function(e){t.lists=e.data.data.data,t.total=e.data.data.total}).catch(function(t){console.log(t)})},handleCurrentChange:function(t){this.currentPage=t,this.search(t)},show:function(){this.isShow=!this.isShow,this.getAdd()},boxHide:function(){this.resetForm("ruleForm"),this.isShow=!this.isShow},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$axios.post("/api/user-add",{section_id:e.ruleForm.adddept,name:e.ruleForm.name,password:e.ruleForm.pass}).then(function(t){"成功"===t.data.message&&(e.$message({message:"添加成功",type:"success"}),e.isShow=!e.isShow,e.search(e.currentPage),e.resetForm("ruleForm"))}).catch(function(t){console.log(t)})})},handleRemove:function(t,e){},handleExceed:function(){this.$message.warning("当前限制选择 1 个文件")},resetForm:function(t){this.$refs[t].resetFields()}},created:function(){this.getPerson(),this.getRegDep()}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AdminPer"},[t._m(0),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"AdminContent clearfix"},[a("div",{staticClass:"search clearfix"},[a("div",{staticClass:"searchOne"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){t.changeReg(t.region)}},model:{value:t.region,callback:function(e){t.region=e},expression:"region"}},t._l(t.regions,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}))],1),t._v(" "),a("div",{staticClass:"searchTwo"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){t.changeDept(t.dept)}},model:{value:t.dept,callback:function(e){t.dept=e},expression:"dept"}},t._l(t.departs,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}))],1)]),t._v(" "),a("div",{staticClass:"ipt"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{type:"text",placeholder:"请输入查询的关键字"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.search(1)}}}),t._v(" "),a("button",{on:{click:function(e){t.search(1)}}},[a("i",{staticClass:"el-icon-search"}),t._v("查询")])]),t._v(" "),a("div",{staticClass:"btn"},[a("el-upload",{staticStyle:{width:"130px",float:"left"},attrs:{action:"/api/user-import","on-remove":t.handleRemove,multiple:"",limit:1,"on-exceed":t.handleExceed,accept:"application/xlsx","auto-upload":""}},[a("button",[a("i",{staticClass:"el-icon-edit-outline"}),t._v("Excel导入")])]),t._v(" "),a("button",{on:{click:t.show}},[t._v("添加人员")])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"model"},[a("div",{staticClass:"box"},[a("div",{staticClass:"boxHeader"},[a("span",[t._v("添加人员")]),t._v(" "),a("i",{staticClass:"el-icon-close",on:{click:t.boxHide}})]),t._v(" "),a("div",{staticClass:"boxIpt"},[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules2,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"地区",prop:"addregion"}},[a("b",[t._v("*")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择地区"},on:{change:function(e){t.getAdd(t.ruleForm.addregion)}},model:{value:t.ruleForm.addregion,callback:function(e){t.$set(t.ruleForm,"addregion",e)},expression:"ruleForm.addregion"}},t._l(t.addRegions,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"部门",prop:"adddept"}},[a("b",[t._v("*")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择部门"},on:{change:function(e){t.getAdd()}},model:{value:t.ruleForm.adddept,callback:function(e){t.$set(t.ruleForm,"adddept",e)},expression:"ruleForm.adddept"}},t._l(t.addDepts,function(t){return a("el-option",{key:t.id,attrs:{label:t.section_two,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("b",[t._v("*")]),t._v(" "),a("el-input",{model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"pass"}},[a("b",[t._v("*")]),t._v(" "),a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:t.ruleForm.pass,callback:function(e){t.$set(t.ruleForm,"pass",e)},expression:"ruleForm.pass"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("b",[t._v("*")]),t._v(" "),a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:t.ruleForm.checkPass,callback:function(e){t.$set(t.ruleForm,"checkPass",e)},expression:"ruleForm.checkPass"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"modelBtn"},[a("button",{on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")])])])])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"listTable"},[a("table",[t._m(1),t._v(" "),t._l(t.lists,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.section_one))]),t._v(" "),a("td",[t._v(t._s(e.section_two))]),t._v(" "),a("td",[t._v(t._s(e.name))]),t._v(" "),t._l(t.opt,function(s){return a("td",[a("span",[a("router-link",{attrs:{to:"/superView/"+e.id}},[t._v(t._s(s.view))])],1),a("span",[t._v("|")]),t._v(" "),a("span",[a("router-link",{attrs:{to:"/superEdit/"+e.id}},[t._v(t._s(s.edit))])],1),a("span",[t._v("|")]),t._v(" "),a("span",{on:{click:function(a){t.deltPer(e.id)}}},[t._v(t._s(s.del))])])})],2)})],2)]),t._v(" "),t.myShow?a("p",{staticStyle:{"font-size":"16px","text-align":"center","margin-top":"40px"}},[t._v("暂无人员")]):t._e(),t._v(" "),a("div",{staticClass:"page"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":10,background:"",layout:"total,prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"AdminTop"},[e("i",[this._v("当前位置：首页")]),this._v(" >\n        "),e("span",[this._v("人员管理")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",[this._v("地区")]),this._v(" "),e("td",[this._v("部门")]),this._v(" "),e("td",[this._v("姓名")]),this._v(" "),e("td",[this._v("管理")])])}]};var l=a("VU/8")(r,c,!1,function(t){a("TBu0")},null,null);e.default=l.exports}});
//# sourceMappingURL=11.e1f90994b2543cefff89.js.map