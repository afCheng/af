webpackJsonp([13],{AFR3:function(t,e){},OU3V:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:function(){return{pdf_Name:"",uploadFile:{type_id:"",description:""},fileList3:[],ruleForm:{region:"",desc:"",file:[]},rules:{region:[{required:!0,message:"请选择类型",trigger:"change"}],desc:[{required:!0,message:"请输入内容",trigger:"blur"}]},lists:[],arr:[],isShow:!1,value:"请选择"}},methods:{deltPer:function(t){var e=this,a=this;this.$confirm("此操作将删除该资料, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.post("/api/database-del",{id:t}).then(function(t){"删除成功"===t.data.message?(a.$message({message:"删除成功",type:"success"}),a.getData()):a.$message.error("删除失败")}).catch(function(t){console.log(t)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},watch:function(t){},handleRemove:function(){this.ruleForm.file=[]},submitUpload:function(t){var e=this;0==this.ruleForm.file.length?this.$message({message:"请先选则pdf文件",type:"warning"}):this.$refs[t].validate(function(t){if(!t)return!1;e.uploadFile.type_id=e.ruleForm.region,e.uploadFile.description=e.ruleForm.desc,e.$refs.upload.submit(),e.isShow=!e.isShow})},handleChange:function(t,e){this.ruleForm.file=t},handleExceed:function(t,e){this.$message.warning("当前限制只能选择 1 个文件")},getData:function(){var t=this;t.$axios.post("/api/database-list",{}).then(function(e){for(var a in t.lists=e.data.data.data,e.data.data.data)for(var s in e.data.data.data[a])for(var i in e.data.data.data[a][s]);t.pdf_Name=e.data.data.data[a][s][i].original_file}).catch(function(t){console.log(t)})},show:function(){this.isShow=!this.isShow},boxHide:function(){this.isShow=!this.isShow,this.ruleForm.region="",this.ruleForm.desc=""}},created:function(){this.$router.push("/SuperReference"),console.log(1111),console.log(this.$store.state.host),console.log(this.$store.state.protocol)},mounted:function(){this.getData()}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ReferenceData"},[a("div",{staticClass:"dataTop clearfix"},[t._m(0),t._v(" "),a("div",{staticClass:"upload"},[a("button",{on:{click:t.show}},[t._v("上传资料")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"model"},[a("div",{staticClass:"box"},[a("div",{staticClass:"boxHeader"},[a("b",[t._v("上传资料")]),t._v(" "),a("i",{staticClass:"el-icon-close",on:{click:t.boxHide}})]),t._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"选择类型",prop:"region"}},[a("el-select",{attrs:{placeholder:"请选择类型"},model:{value:t.ruleForm.region,callback:function(e){t.$set(t.ruleForm,"region",e)},expression:"ruleForm.region"}},t._l(t.lists,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"输入内容",prop:"desc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.ruleForm.desc,callback:function(e){t.$set(t.ruleForm,"desc",e)},expression:"ruleForm.desc"}})],1),t._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:t.$store.state.protocol+t.$store.state.host+t.$store.state.pdf_path,"on-change":t.handleChange,data:t.uploadFile,"auto-upload":!1,"on-remove":t.handleRemove,"on-exceed":t.handleExceed,limit:1,accept:"application/pdf","file-list":t.fileList3}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("br"),t._v(" "),a("el-button",{staticClass:"btnUpload",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){t.submitUpload("ruleForm")}}},[t._v("上传文件")])],1)],1)],1)])]),t._v(" "),t._l(t.lists,function(e,s){return a("div",{key:s,staticClass:"dataList"},[a("div",{staticClass:"dataListTop clearfix"},[a("div",{staticClass:"dataListTopL"},[a("span",[t._v(t._s(e.name))]),t._v(" "),a("b",[t._v("|")]),t._v(" "),a("i",[t._v(t._s(e.Market))])]),t._v(" "),t._m(1,!0)]),t._v(" "),a("div",{staticClass:"dataListTopB"},[a("ul",t._l(e.database,function(e,s){return a("li",{key:s,on:{click:function(a){t.watch(e.id)}}},[a("span",[a("router-link",{attrs:{to:"/WatchPdf/"+e.id}},[t._v(t._s(e.description))])],1),t._v(" "),a("b",{on:{click:function(a){t.deltPer(e.id)}}},[t._v("删除")])])}))])])})],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[this._v("当前位置: 首页 >\n        "),e("i",[this._v("参考资料")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dataListTopR"},[e("span",[this._v("更多")]),this._v(" "),e("i",{staticClass:"el-icon-arrow-right"})])}]};var o=a("VU/8")(s,i,!1,function(t){a("AFR3")},null,null);e.default=o.exports}});
//# sourceMappingURL=13.e7f0af347392992116da.js.map