webpackJsonp([12],{Xhuu:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("pFYg"),r=i.n(s),a=i("mvHQ"),o=i.n(a),l={data:function(){var e=function(e,t,i){""!=t&&(Number(t)?t<=0?i(new Error("输入值必须为正数")):i():i(0==t?new Error("输入值必须为正数"):new Error("输入值必须为数字")))};return{newLoading:!1,titleChoose:"1",linkReady:{first:!1,second:!1,three:!1,fourth:!1,fifth:!1},allReady:!1,showBullet:!1,ruleForm:{form1:[{drillName:"",drillDetail:""}]},linkDesignForm:{lists:[{linkNum:"环节一",node_name:"",fileList:[],description:"",attachment_id:[],a_time:"",describe:"",problem_time:"",answer:"",score:"",score_time:"",time:"",remark:"",score_user:"",remarkData:[]}]},btnFileIndex:"",timeRules:{validator:e},answerTimeRules:[{required:!0,message:"请输入答题时间"},{validator:e}],scoreRules:[{required:!0,message:"请输入问题分数"},{validator:e}],peopleForm:!1,ruleForm3:{director:"",directorData:[],group:"",groupData:[],professor:"",professorData1:[]},treeClickIndex:"",treeSearchInput:"",treeSelectValue:"按姓名",treeOptions:[{value:"按姓名",label:"按姓名"},{value:"按部门",label:"按部门"}],peoPleData:[],disPeople:[],checkedPeople:[],setGroupData:{groupChooseNum:"",radioTemplate:"1",groupA:["参演A组","参演B组","参演C组","参演D组","参演**组"],group1:["参演1组","参演2组","参演3组","参演4组","参演**组"],groupNum:"",haveGroupNum:!1,customLists:[{groupValue:""}]},timeData:{chooseDate:"",chooseTime:"",valueDate:"",valueTime:""},pickerOptions1:{disabledDate:function(e){return e.getTime()+864e5<Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]},editStatus:{first:!1,second:!1,three:!1,fourth:!1,fifth:!1},user_id:"",draft_id:"",draft_time:""}},watch:{treeSearchInput:function(e){this.$refs.tree.filter(e)}},beforeRouteLeave:function(e,t,i){for(var s in this.ruleForm.form1[0].drillName||this.ruleForm.form1[0].drillDetail?this.editStatus.first=!0:this.editStatus.first=!1,this.linkDesignForm.lists)this.linkDesignForm.lists[s].node_name||this.linkDesignForm.lists[s].description||0!=this.linkDesignForm.lists[s].attachment_id.length||this.linkDesignForm.lists[s].a_time||this.linkDesignForm.lists[s].describe||this.linkDesignForm.lists[s].problem_time||this.linkDesignForm.lists[s].answer||this.linkDesignForm.lists[s].score||this.linkDesignForm.lists[s].score_time||this.linkDesignForm.lists[s].time||this.linkDesignForm.lists[s].remark?this.editStatus.second=!0:this.editStatus.second=!1;for(var r in this.ruleForm3){if(""!=this.ruleForm3[r]){this.editStatus.three=!0;break}this.editStatus.three=!1}(""!=this.setGroupData.groupChooseNum?this.editStatus.fourth=!0:this.editStatus.fifth=!1,""!=this.timeData.valueTime||""!=this.timeData.valueDate?this.editStatus.fifth=!0:this.editStatus.fifth=!1,this.editStatus.first||this.editStatus.second||this.editStatus.three||this.editStatus.fourth||this.editStatus.fifth)?this.showBullet?i():window.confirm("内容还未提交，是否离开？")?i():(this.$store.state.showHeader="2",i(!1)):i()},created:function(){this.$store.state.showHeader="2",this.user_id=JSON.parse(localStorage.user).id,this.watchDraft(),this.getPeopleBank()},mounted:function(){var e=this;this.draft_time=setInterval(function(){e.pushDraft()},3e4)},methods:{watchDraft:function(){var e=this;this.$axios.post("/api/is-draft",{user_id:this.user_id}).then(function(t){0==t.data.status&&(window.confirm("您有未提交的草稿，是否继续编辑？")?(e.ruleForm=JSON.parse(t.data.data.one),e.linkDesignForm=JSON.parse(t.data.data.two),e.ruleForm3=JSON.parse(t.data.data.three),e.setGroupData=JSON.parse(t.data.data.four),e.timeData=JSON.parse(t.data.data.five),e.draft_id=t.data.data.id,e.checkout()):e.draft_id=t.data.data.id)})},pushDraft:function(){this.$axios.post("/api/the-draft",{user_id:this.user_id,draft_id:this.draft_id,one:o()(this.ruleForm),two:o()(this.linkDesignForm),three:o()(this.ruleForm3),four:o()(this.setGroupData),five:o()(this.timeData)}).then(function(e){})},pushDraftClick:function(){var e=this;this.$axios.post("/api/the-draft",{user_id:this.user_id,draft_id:this.draft_id,one:o()(this.ruleForm),two:o()(this.linkDesignForm),three:o()(this.ruleForm3),four:o()(this.setGroupData),five:o()(this.timeData)}).then(function(t){0==t.data.status?e.$message({message:"保存草稿成功！",type:"success",duration:"1000"}):e.$message({message:"保存草稿失败！",type:"warn",duration:"1000"})})},getPeopleBank:function(){var e=this;this.$axios.post("/api/people-section").then(function(t){var i=[];for(var s in t.data.data){i.push(t.data.data[s].section_one);for(var r=[],a=0,o=i.length;a<o;a++){var l=i[a];-1===r.indexOf(l)&&r.push(l)}i=r}var n=[];for(var c in i)n.push({label:i[c],level:0,children:[],id:"000000"+c});for(var u in t.data.data)for(var h in n)t.data.data[u].section_one==n[h].label&&n[h].children.push({label:t.data.data[u].section_two,level:1,children:[],id:"111111"+t.data.data[u].id});for(var d in t.data.data)for(var m in n)for(var p in n[m].children){if(t.data.data[d].section_one+t.data.data[d].section_two==n[m].label+n[m].children[p].label)for(var f in n[m].children[p].children=t.data.data[d].user,n[m].children[p].children)n[m].children[p].children[f].label=n[m].children[p].children[f].name,n[m].children[p].children[f].level=2}e.disPeople=n}).catch(function(e){})},unique:function(e){var t={};return e.filter(function(e,i,s){return!t.hasOwnProperty((void 0===e?"undefined":r()(e))+o()(e))&&(t[(void 0===e?"undefined":r()(e))+o()(e)]=!0)})},changeClick:function(e){var t=this;if(this.checkout(),"6"!=e)this.titleChoose=e;else if(1==this.allReady){this.newLoading=!0;var i=[];for(var s in i=this.ruleForm3.directorData,this.ruleForm3.groupData)i.push(this.ruleForm3.groupData[s]);for(var r in this.ruleForm3.professorData1)i.push(this.ruleForm3.professorData1[r]);i=this.unique(i);var a=[];if("1"==this.setGroupData.groupChooseNum)a.push("此演练不分组");else if("2"==this.setGroupData.groupChooseNum){if("2"==this.setGroupData.radioTemplate)for(var o=1;o<=this.setGroupData.groupNum;o++){var l="参演"+o+"组";a.push(l)}else if("1"==this.setGroupData.radioTemplate)for(var n=0;n<this.setGroupData.groupNum;n++){var c="参演"+String.fromCharCode(65+n)+"组";a.push(c)}}else if("3"==this.setGroupData.groupChooseNum)for(var u in this.setGroupData.customLists)a.push(this.setGroupData.customLists[u].groupValue);var h=this.timeData.valueDate+" "+this.timeData.valueTime;this.$axios.post("/api/design-add",{draft_id:this.draft_id,name:this.ruleForm.form1[0].drillName,description:this.ruleForm.form1[0].drillDetail,design_time:h,group_name:a,character2:i,node_name:this.linkDesignForm.lists}).then(function(e){t.newLoading=!1,"0"==e.data.status?t.showBullet=!0:t.$message({message:"提交演练项目失败！",type:"warning"})}).catch(function(e){})}},clickBigTitle:function(e){this.titleChoose=e,this.checkout()},checkout:function(){for(var e in this.ruleForm.form1)for(var t in this.ruleForm.form1[e]){if(""==this.ruleForm.form1[e][t]){this.linkReady.first=!1;break}this.linkReady.first=!0}for(var i in this.linkDesignForm.lists){var s=this.linkDesignForm.lists[i].node_name.length;if(!(s>=3&&s<=7&&this.linkDesignForm.lists[i].describe&&this.linkDesignForm.lists[i].score>0&&this.linkDesignForm.lists[i].problem_time>0)||""==this.linkDesignForm.lists[i].attachment_id&&""==this.linkDesignForm.lists[i].description){this.linkReady.second=!1;break}""==this.linkDesignForm.lists[i].a_time||this.linkDesignForm.lists[i].a_time>0?(this.linkReady.second=!0,""==this.linkDesignForm.lists[i].time||this.linkDesignForm.lists[i].time>0?(this.linkReady.second=!0,""==this.linkDesignForm.lists[i].score_time||this.linkDesignForm.lists[i].score_time>0?this.linkReady.second=!0:this.linkReady.second=!1):this.linkReady.second=!1):this.linkReady.second=!1}for(var r in this.ruleForm3){if(""==this.ruleForm3[r]){this.linkReady.three=!1;break}this.linkReady.three=!0}if("1"==this.setGroupData.groupChooseNum)this.linkReady.fourth=!0;else if("2"==this.setGroupData.groupChooseNum)""!=this.setGroupData.groupNum?this.linkReady.fourth=!0:this.linkReady.fourth=!1;else if("3"==this.setGroupData.groupChooseNum)for(var a in this.setGroupData.customLists){if(""==this.setGroupData.customLists[a].groupValue){this.linkReady.fourth=!1;break}this.linkReady.fourth=!0}else this.linkReady.fourth=!1;this.timeData.valueDate&&this.timeData.valueTime?this.linkReady.fifth=!0:this.linkReady.fifth=!1,this.linkReady.first&&this.linkReady.second&&this.linkReady.three&&this.linkReady.fourth&&this.linkReady.fifth?this.allReady=!0:this.allReady=!1},materialChange:function(e,t){},chooseFile:function(e){this.btnFileIndex=e},handleExceed:function(e,t){this.$message.warning("当前限制只能上传 1 个素材文件！")},handlePreview:function(e){},handleAvatarSuccess:function(e,t,i){if("0"==e.status){var s=t;s.id=e.data,this.linkDesignForm.lists[this.btnFileIndex].fileList.push(s),this.linkDesignForm.lists[this.btnFileIndex].attachment_id.push(e.data),this.checkout()}},beforeRemove:function(e,t){},handleRemove:function(e,t){var i=this;this.$axios.post("/api/attachment-del",{attachment_id:e.id}).then(function(s){if("0"==s.data.status){for(var r in i.fileList=t,i.linkDesignForm.lists)for(var a in i.linkDesignForm.lists[r].attachment_id)e.id==i.linkDesignForm.lists[r].attachment_id[a]&&(i.linkDesignForm.lists[r].attachment_id.splice(a,1),i.linkDesignForm.lists[r].fileList=t);i.pushDraft(),i.checkout()}}).catch(function(e){})},addLink:function(){var e=document.getElementsByClassName("link_title").length;switch(e){case 0:e="环节一";break;case 1:e="环节二";break;case 2:e="环节三";break;case 3:e="环节四";break;case 4:e="环节五";break;case 5:e="环节六";break;case 6:e="环节七";break;case 7:e="环节八";break;case 8:e="环节九";break;case 9:e="环节十";break;default:e="其他环节"}var t=e;this.linkDesignForm.lists.push({linkNum:t,node_name:"",fileList:[],description:"",attachment_id:[],a_time:"",describe:"",problem_time:"",answer:"",score:"",score_time:"",time:"",remark:"",score_user:"",remarkData:[]}),this.checkout()},deleteLink:function(e){var t=this.linkDesignForm.lists.indexOf(e);if(-1!==t)for(var i in this.linkDesignForm.lists.splice(t,1),this.linkDesignForm.lists){var s=i;switch(s){case"0":s="环节一";break;case"1":s="环节二";break;case"2":s="环节三";break;case"3":s="环节四";break;case"4":s="环节五";break;case"5":s="环节六";break;case"6":s="环节七";break;case"7":s="环节八";break;case"8":s="环节九";break;default:s="其他环节"}this.linkDesignForm.lists[i].linkNum=s}this.checkout()},showPeopleForm:function(e){for(var t in this.treeClickIndex=e,this.treeSearchInput="",this.disPeople)for(var i in this.disPeople[t].disabled=!1,this.disPeople[t].children)for(var s in this.disPeople[t].children[i].disabled=!1,this.disPeople[t].children[i].children)this.disPeople[t].children[i].children[s].disabled=!1;this.peopleForm=!0;var r=[],a=[];if("director"==e){for(var o in this.ruleForm3.directorData)a.push(this.ruleForm3.directorData[o].user_id);for(var l in this.checkedPeople=a,this.ruleForm3.groupData)r.push(this.ruleForm3.groupData[l].user_id);for(var n in this.ruleForm3.professorData1)r.push(this.ruleForm3.professorData1[n].user_id);for(var c in this.linkDesignForm.lists)for(var u in this.linkDesignForm.lists[c].remarkData)r.push(this.linkDesignForm.lists[c].remarkData[u]);for(var h in this.disPeople)for(var d in this.disPeople[h].disabled=!0,this.disPeople[h].children)for(var m in this.disPeople[h].children[d].disabled=!0,this.disPeople[h].children[d].children)for(var p in r)this.disPeople[h].children[d].children[m].id==r[p]&&(this.disPeople[h].children[d].children[m].disabled=!0)}else if("group"==e){for(var f in this.ruleForm3.groupData)a.push(this.ruleForm3.groupData[f].user_id);for(var v in this.checkedPeople=a,this.ruleForm3.directorData)r.push(this.ruleForm3.directorData[v].user_id);for(var k in this.ruleForm3.professorData1)r.push(this.ruleForm3.professorData1[k].user_id);for(var _ in this.linkDesignForm.lists)for(var g in this.linkDesignForm.lists[_].remarkData)r.push(this.linkDesignForm.lists[_].remarkData[g]);for(var D in this.disPeople)for(var b in this.disPeople[D].children)for(var F in this.disPeople[D].children[b].children)for(var C in r)this.disPeople[D].children[b].children[F].id==r[C]&&(this.disPeople[D].children[b].children[F].disabled=!0)}else if("professor"==e){for(var y in this.ruleForm3.professorData1)a.push(this.ruleForm3.professorData1[y].user_id);for(var w in this.checkedPeople=a,this.ruleForm3.directorData)r.push(this.ruleForm3.directorData[w].user_id);for(var x in this.ruleForm3.groupData)r.push(this.ruleForm3.groupData[x].user_id);for(var G in this.disPeople)for(var N in this.disPeople[G].children)for(var P in this.disPeople[G].children[N].children)for(var T in r)this.disPeople[G].children[N].children[P].id==r[T]&&(this.disPeople[G].children[N].children[P].disabled=!0)}else{for(var R in this.checkedPeople=this.linkDesignForm.lists[e].remarkData,this.ruleForm3.directorData)r.push(this.ruleForm3.directorData[R].user_id);for(var S in this.ruleForm3.groupData)r.push(this.ruleForm3.groupData[S].user_id);for(var $ in this.disPeople)for(var I in this.disPeople[$].disabled=!0,this.disPeople[$].children)for(var L in this.disPeople[$].children[I].disabled=!0,this.disPeople[$].children[I].children)for(var O in r)this.disPeople[$].children[I].children[L].id==r[O]&&(this.disPeople[$].children[I].children[L].disabled=!0)}},closePeopleForm:function(){this.peopleForm=!1},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},submitTree:function(){var e=this.$refs.tree.getCheckedNodes(),t=this.disPeople,i="",s=[],r=[];for(var a in t)for(var o in e)if(t[a]==e[o])for(var l in t[a].children)for(var n in t[a].children[l].children)s.push(t[a].label+" "+t[a].children[l].label+" "+t[a].children[l].children[n].label),r.push({user_id:t[a].children[l].children[n].id,character:""});else for(var c in t[a].children)if(t[a].children[c]==e[o])for(var u in t[a].children[c].children)s.push(t[a].label+" "+t[a].children[c].label+" "+t[a].children[c].children[u].label),r.push({user_id:t[a].children[c].children[u].id,character:""});else for(var h in t[a].children[c].children)t[a].children[c].children[h]==e[o]&&(s.push(t[a].label+" "+t[a].children[c].label+" "+t[a].children[c].children[h].label),r.push({user_id:t[a].children[c].children[h].id,character:""}));for(var d in s=this.unique(s),r=this.unique(r),s)i+=s[d]+",";if("director"==this.treeClickIndex){for(var m in this.ruleForm3.director=i.substr(0,i.length-1),r)r[m].character="0";this.ruleForm3.directorData=r}else if("group"==this.treeClickIndex){for(var p in this.ruleForm3.group=i.substr(0,i.length-1),r)r[p].character="1";this.ruleForm3.groupData=r}else if("professor"==this.treeClickIndex){for(var f in this.ruleForm3.professor=i.substr(0,i.length-1),r)r[f].character="2";this.ruleForm3.professorData1=r}else{this.linkDesignForm.lists[this.treeClickIndex].remark=i.substr(0,i.length-1);0==r.length?(this.linkDesignForm.lists[this.treeClickIndex].score_user="",this.linkDesignForm.lists[this.treeClickIndex].remarkData=[]):([].push({user_id:r[0].user_id}),this.linkDesignForm.lists[this.treeClickIndex].score_user=r[0].user_id,this.linkDesignForm.lists[this.treeClickIndex].remarkData.push(r[0].user_id))}this.peopleForm=!1,this.checkout()},handleNodeClick:function(e){},handleCheckChange:function(e,t,i){if("group"==this.treeClickIndex||"professor"==this.treeClickIndex);else if(t&&2==e.level){var s=[e];this.$refs.tree.setCheckedNodes(s)}},chooseGroupTitle:function(e){this.setGroupData.groupChooseNum=e,2==e&&""==this.setGroupData.groupNum?this.setGroupData.haveGroupNum=!0:this.setGroupData.haveGroupNum=!1,this.checkout()},chooseSecondGroup:function(){""!=this.setGroupData.groupNum?(this.setGroupData.groupChooseNum=2,this.setGroupData.haveGroupNum=!1):(this.setGroupData.groupChooseNum="",this.setGroupData.haveGroupNum=!0),this.checkout()},chooseThirdGroup:function(){this.setGroupData.groupChooseNum=3},addGroup:function(){this.setGroupData.customLists.push({groupValue:""})},deleteGroup:function(e){this.setGroupData.customLists.splice(e,1)},onPickDate:function(e){if(null==e)this.timeData.valueDate="";else{var t=new Date(e),i=t.getFullYear()+"-",s=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",r=t.getDate()<10?"0"+t.getDate():t.getDate();this.timeData.valueDate=i+s+r}this.checkout()},onPickTime:function(e){if(null==e)this.timeData.valueTime="";else{var t=new Date(e),i=(t.getHours()<10?"0"+t.getHours():t.getHours())+":",s=(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":",r=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();this.timeData.valueTime=i+s+r}this.checkout()},onFocusTime:function(){this.timeData.valueTime="",this.timeData.chooseTime="",console.log(this.timeData)},closeBullet:function(){this.showBullet=!1,window.location.reload()},ableToSee:function(){this.$router.push("/enterable")}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.newLoading,expression:"newLoading"}],staticClass:"newHome",attrs:{id:"newhome"}},[i("div",{staticClass:"newHomeHeader"},[i("ul",[i("li",{class:"1"==e.titleChoose?"new_active":"",on:{click:function(t){e.changeClick(1)}}},[e._v("项目设置")]),e._v(" "),i("li",{class:"2"==e.titleChoose?"new_active":"",on:{click:function(t){e.changeClick(2)}}},[e._v("环节设计")]),e._v(" "),i("li",{class:"3"==e.titleChoose?"new_active":"",on:{click:function(t){e.changeClick(3)}}},[e._v("选择参演名单")]),e._v(" "),i("li",{class:"4"==e.titleChoose?"new_active":"",on:{click:function(t){e.changeClick(4)}}},[e._v("设置分组")]),e._v(" "),i("li",{class:"5"==e.titleChoose?"new_active":"",on:{click:function(t){e.changeClick(5)}}},[e._v("设置演练时间")]),e._v(" "),i("li",{staticClass:"disabled",class:"6"==e.titleChoose?"new_active":"",style:e.allReady?"":"color: #9b9b9b;cursor: auto;",attrs:{id:"last"},on:{click:function(t){e.changeClick(6)}}},[e._v("提交演练项目")]),e._v(" "),i("el-button",{on:{click:function(t){e.pushDraftClick()}}},[e._v("保存草稿")])],1)]),e._v(" "),i("div",{staticClass:"newHomeMain"},[i("ul",{staticClass:"newMainList"},[i("li",{class:["1"==e.titleChoose?"is_active":"",e.linkReady.first?"is_end":""],on:{click:function(t){e.clickBigTitle(1)}}},[i("div",[e._v("1")]),e._v(" "),i("p",[e._v("项目设置")]),e._v(" "),i("span")]),e._v(" "),i("li",{class:["2"==e.titleChoose?"is_active":"",e.linkReady.second?"is_end":""],on:{click:function(t){e.clickBigTitle(2)}}},[i("div",[e._v("2")]),e._v(" "),i("p",[e._v("环节设计")]),e._v(" "),i("span")]),e._v(" "),i("li",{class:["3"==e.titleChoose?"is_active":"",e.linkReady.three?"is_end":""],on:{click:function(t){e.clickBigTitle(3)}}},[i("div",[e._v("3")]),e._v(" "),i("p",[e._v("选择参演名单")]),e._v(" "),i("span")]),e._v(" "),i("li",{class:["4"==e.titleChoose?"is_active":"",e.linkReady.fourth?"is_end":""],on:{click:function(t){e.clickBigTitle(4)}}},[i("div",[e._v("4")]),e._v(" "),i("p",[e._v("设置分组")]),e._v(" "),i("span")]),e._v(" "),i("li",{class:["5"==e.titleChoose?"is_active":"",e.linkReady.fifth?"is_end":""],on:{click:function(t){e.clickBigTitle(5)}}},[i("div",[e._v("5")]),e._v(" "),i("p",[e._v("设置演练时间")]),e._v(" "),i("span")])])]),e._v(" "),i("div",{staticClass:"newHomeDetail"},["1"==e.titleChoose?i("div",{staticClass:"item_setting"},e._l(e.ruleForm.form1,function(t,s){return i("el-form",{key:s,ref:"ruleForm",refInFor:!0,staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-position":"top","label-width":"100px"}},[i("el-form-item",{attrs:{label:"演练名称",prop:"form1."+s+".drillName",rules:{required:!0,message:"请输入演练名称",trigger:"blur"}}},[i("el-input",{nativeOn:{keyup:function(t){return e.checkout(t)}},model:{value:t.drillName,callback:function(i){e.$set(t,"drillName",i)},expression:"item.drillName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"演练详情",prop:"form1."+s+".drillDetail",rules:{required:!0,message:"请输入演练详情",trigger:"blur"}}},[i("el-input",{attrs:{autosize:{minRows:4},type:"textarea"},nativeOn:{keyup:function(t){return e.checkout(t)}},model:{value:t.drillDetail,callback:function(i){e.$set(t,"drillDetail",i)},expression:"item.drillDetail"}})],1)],1)})):e._e(),e._v(" "),e._l(e.linkDesignForm.lists,function(t,s){return"2"==e.titleChoose?i("div",{key:s,staticClass:"design"},[i("h3",{staticClass:"link_title"},[e._v("\n                "+e._s(t.linkNum)+"\n                "),i("i",{staticClass:"el-icon-close",on:{click:function(i){e.deleteLink(t)}}})]),e._v(" "),i("el-form",{ref:"linkDesignForm",refInFor:!0,staticClass:"demo-form-inline",attrs:{inline:!0,model:e.linkDesignForm,"label-position":"left","label-width":"100px"}},[i("el-form-item",{staticClass:"block_item",attrs:{label:"环节名称",prop:"lists."+s+".node_name",rules:[{required:!0,message:"请输入环节名称"},{min:3,max:7,message:"长度在 3 到 7 个字符"}]}},[i("el-input",{attrs:{placeholder:"长度在3 ～ 7个字符"},nativeOn:{keyup:function(t){return e.checkout(t)}},model:{value:t.node_name,callback:function(i){e.$set(t,"node_name",i)},expression:"item.node_name"}})],1),e._v(" "),i("div",{staticClass:"right_time"},[i("el-form-item",{staticClass:"link_time",attrs:{label:"素材播放倒计时",prop:"lists."+s+".a_time",rules:e.timeRules}},[i("el-input",{nativeOn:{keyup:function(t){return e.checkout(t)}},model:{value:t.a_time,callback:function(i){e.$set(t,"a_time",i)},expression:"item.a_time"}}),e._v("\n                        分钟\n                    ")],1),e._v(" "),i("el-form-item",{staticClass:"link_time",attrs:{label:"答题时间",prop:"lists."+s+".problem_time",rules:e.answerTimeRules}},[i("el-input",{nativeOn:{keyup:function(t){return e.checkout(t)}},model:{value:t.problem_time,callback:function(i){e.$set(t,"problem_time",i)},expression:"item.problem_time"}}),e._v("\n                        分钟\n                    ")],1),e._v(" "),i("el-form-item",{staticClass:"link_time",attrs:{label:"点评时间",prop:"lists."+s+".time",rules:e.timeRules}},[i("el-input",{nativeOn:{keyup:function(t){return e.checkout(t)}},model:{value:t.time,callback:function(i){e.$set(t,"time",i)},expression:"item.time"}}),e._v("\n                        分钟\n                    ")],1),e._v(" "),i("el-form-item",{staticClass:"link_time",attrs:{label:"打分时间",prop:"lists."+s+".score_time",rules:e.timeRules}},[i("el-input",{nativeOn:{keyup:function(t){return e.checkout(t)}},model:{value:t.score_time,callback:function(i){e.$set(t,"score_time",i)},expression:"item.score_time"}}),e._v("\n                        分钟\n                    ")],1)],1),e._v(" "),i("el-form-item",{staticClass:"material",attrs:{label:"场景素材"}},[i("el-input",{staticStyle:{width:"80%"},nativeOn:{keyup:function(t){return e.checkout(t)}},model:{value:t.description,callback:function(i){e.$set(t,"description",i)},expression:"item.description"}}),e._v(" "),i("el-upload",{ref:"upload",refInFor:!0,staticClass:"upload-demo",attrs:{action:e.$store.state.protocol+e.$store.state.host+e.$store.state.material_path,"on-change":e.materialChange,"on-preview":e.handlePreview,"on-success":e.handleAvatarSuccess,limit:1,"on-exceed":e.handleExceed,"before-remove":e.beforeRemove,"on-remove":e.handleRemove,"list-type":"picture","file-list":t.fileList,"auto-upload":!0,accept:"audio/*,video/*,image/*"}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},on:{click:function(t){e.chooseFile(s)}},slot:"trigger"},[e._v("选取文件")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"题目",prop:"lists."+s+".describe",rules:{required:!0,message:"请输入题目"}}},[i("el-input",{nativeOn:{keyup:function(t){return e.checkout(t)}},model:{value:t.describe,callback:function(i){e.$set(t,"describe",i)},expression:"item.describe"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"参考答案"}},[i("el-input",{attrs:{autosize:{minRows:4},type:"textarea"},nativeOn:{keyup:function(t){return e.checkout(t)}},model:{value:t.answer,callback:function(i){e.$set(t,"answer",i)},expression:"item.answer"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"问题分数",prop:"lists."+s+".score",rules:e.scoreRules}},[i("el-input",{nativeOn:{keyup:function(t){return e.checkout(t)}},model:{value:t.score,callback:function(i){e.$set(t,"score",i)},expression:"item.score"}})],1),e._v(" "),i("el-form-item",{staticClass:"btnInput",attrs:{label:"点评专家"}},[i("el-input",{attrs:{disabled:!0},model:{value:t.remark,callback:function(i){e.$set(t,"remark",i)},expression:"item.remark"}},[i("el-button",{staticClass:"iconfont el-icon-emergency-pull_down",attrs:{slot:"append"},on:{click:function(t){e.showPeopleForm(s)}},slot:"append"})],1)],1)],1)],1):e._e()}),e._v(" "),"2"==e.titleChoose?i("div",{staticClass:"addLink"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addLink}},[e._v("插入环节")])],1):e._e(),e._v(" "),"3"==e.titleChoose?i("div",{staticClass:"panel"},[i("el-form",{ref:"ruleForm3",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm3,"label-position":"top","label-width":"100px"}},[i("el-form-item",{attrs:{label:"导演组",prop:"director",rules:{required:!0,message:"请选择导演组",trigger:"blur"}}},[i("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm3.director,callback:function(t){e.$set(e.ruleForm3,"director",t)},expression:"ruleForm3.director"}},[i("el-button",{staticClass:"iconfont el-icon-emergency-pull_down",attrs:{slot:"append"},on:{click:function(t){e.showPeopleForm("director")}},slot:"append"})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"参演小组",prop:"group",rules:{required:!0,message:"请选择参演小组",trigger:"blur"}}},[i("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm3.group,callback:function(t){e.$set(e.ruleForm3,"group",t)},expression:"ruleForm3.group"}},[i("el-button",{staticClass:"iconfont el-icon-emergency-pull_down",attrs:{slot:"append"},on:{click:function(t){e.showPeopleForm("group")}},slot:"append"})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"评分专家",prop:"professor",rules:{required:!0,message:"请选择评分专家",trigger:"blur"}}},[i("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm3.professor,callback:function(t){e.$set(e.ruleForm3,"professor",t)},expression:"ruleForm3.professor"}},[i("el-button",{staticClass:"iconfont el-icon-emergency-pull_down",attrs:{slot:"append"},on:{click:function(t){e.showPeopleForm("professor")}},slot:"append"})],1)],1)],1)],1):e._e(),e._v(" "),e.peopleForm?i("div",{staticStyle:{position:"fixed",top:"0",left:"0","z-index":"100",width:"100%",height:"100%","background-color":"rgba(0,0,0,0.1)"}},[i("div",{staticClass:"peopleTree"},[i("div",{staticClass:"tree_title"},[e._v("人员库\n                    "),i("i",{staticClass:"el-icon-close",on:{click:function(t){e.closePeopleForm()}}})]),e._v(" "),i("div",{staticClass:"treeSearch"},[i("el-input",{attrs:{placeholder:"请输入要搜索的关键词"},model:{value:e.treeSearchInput,callback:function(t){e.treeSearchInput=t},expression:"treeSearchInput"}})],1),e._v(" "),i("el-tree",{ref:"tree",attrs:{data:e.disPeople,"filter-node-method":e.filterNode,"node-key":"id","default-checked-keys":e.checkedPeople,"show-checkbox":""},on:{"node-click":e.handleNodeClick,"check-change":e.handleCheckChange}}),e._v(" "),i("div",{staticClass:"subBtn"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitTree()}}},[e._v("提交")])],1)],1)]):e._e(),e._v(" "),"4"==e.titleChoose?i("div",{staticClass:"settingGroup"},[i("div",{staticClass:"group_title",class:"1"==e.setGroupData.groupChooseNum?"groupTitleActive":"",on:{click:function(t){e.chooseGroupTitle(1)}}},[i("span",{staticClass:"iconfont el-icon-emergency-dagou1"}),e._v("不分组\n            ")]),e._v(" "),i("div",{staticClass:"group_title",class:"2"==e.setGroupData.groupChooseNum?"groupTitleActive":"",on:{click:function(t){e.chooseGroupTitle(2)}}},[i("span",{staticClass:"iconfont el-icon-emergency-dagou1"}),e._v("使用模板分组\n            ")]),e._v(" "),i("div",{staticClass:"group_template"},[i("el-radio",{attrs:{label:"1"},on:{change:function(t){e.chooseSecondGroup()}},model:{value:e.setGroupData.radioTemplate,callback:function(t){e.$set(e.setGroupData,"radioTemplate",t)},expression:"setGroupData.radioTemplate"}},[e._v("\n                    模板1：\n                    "),i("ul",e._l(e.setGroupData.groupA,function(t,s){return i("li",{key:s},[e._v(e._s(t))])}))]),e._v(" "),i("el-radio",{attrs:{label:"2"},on:{change:function(t){e.chooseSecondGroup()}},model:{value:e.setGroupData.radioTemplate,callback:function(t){e.$set(e.setGroupData,"radioTemplate",t)},expression:"setGroupData.radioTemplate"}},[e._v("\n                    模板2：\n                    "),i("ul",e._l(e.setGroupData.group1,function(t,s){return i("li",{key:s},[e._v(e._s(t))])}))]),e._v(" "),i("div",{staticStyle:{"margin-top":"10px",height:"53px"}},[e._v("\n                    分成\n                    "),i("el-input",{attrs:{type:"number"},nativeOn:{keyup:function(t){e.chooseSecondGroup()}},model:{value:e.setGroupData.groupNum,callback:function(t){e.$set(e.setGroupData,"groupNum",t)},expression:"setGroupData.groupNum"}}),e._v("\n                    组\n                    "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.setGroupData.haveGroupNum,expression:"setGroupData.haveGroupNum"}],staticStyle:{color:"#f56c6c","font-size":"12px",margin:"5px 0 0 25px"}},[e._v("请输入组数")])],1)],1),e._v(" "),i("div",{staticClass:"group_title",class:"3"==e.setGroupData.groupChooseNum?"groupTitleActive":"",on:{click:function(t){e.chooseGroupTitle(3)}}},[i("span",{staticClass:"iconfont el-icon-emergency-dagou1"}),e._v("\n                自定义分组\n            ")]),e._v(" "),i("div",{staticClass:"group_custom"},[i("span",{staticStyle:{height:"22px","font-size":"16px"}},[e._v("自定义组名:")]),e._v(" "),e._l(e.setGroupData.customLists,function(t,s){return i("div",{key:s},[i("el-input",{nativeOn:{keyup:function(t){e.chooseThirdGroup()}},model:{value:t.groupValue,callback:function(i){e.$set(t,"groupValue",i)},expression:"item.groupValue"}},[s>0?i("i",{staticClass:"el-input__icon el-icon-close",attrs:{slot:"suffix"},on:{click:function(t){e.deleteGroup(s)}},slot:"suffix"}):e._e()]),e._v(" "),s==e.setGroupData.customLists.length-1?i("div",{staticClass:"el-icon-close add-group",on:{click:function(t){e.addGroup()}}}):e._e()],1)})],2)]):e._e(),e._v(" "),"5"==e.titleChoose?i("div",{staticClass:"drillTime"},[i("div",{staticClass:"timeTitle"},[e._v("演练开始时间")]),e._v(" "),i("div",{staticClass:"block"},[i("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期","picker-options":e.pickerOptions1},on:{change:e.onPickDate},model:{value:e.timeData.chooseDate,callback:function(t){e.$set(e.timeData,"chooseDate",t)},expression:"timeData.chooseDate"}}),e._v(" "),i("el-time-picker",{attrs:{"picker-options":{selectableRange:"00:00:00 - 23:59:59"},placeholder:"任意时间点"},on:{change:e.onPickTime,focus:function(t){e.onFocusTime()}},model:{value:e.timeData.chooseTime,callback:function(t){e.$set(e.timeData,"chooseTime",t)},expression:"timeData.chooseTime"}})],1)]):e._e(),e._v(" "),e.showBullet?i("div",{staticClass:"submitBullet"},[i("div",{staticClass:"mask"},[i("div",{staticClass:"bulletTitle"},[e._v("\n                    提交演练项目\n                    "),i("span",{staticClass:"el-icon-close",on:{click:function(t){e.closeBullet()}}})]),e._v(" "),i("div",{staticClass:"bulletMain"},[i("p",[e._v("恭喜，您已成功创建演练项目。")]),e._v(" "),i("p",[e._v("演练名称: "+e._s(e.ruleForm.form1[0].drillName))]),e._v(" "),i("p",{staticClass:"detail"},[e._v("演练详情: "+e._s(e.ruleForm.form1[0].drillDetail))]),e._v(" "),i("p",[e._v("开始演练时间: "+e._s(e.timeData.valueDate)+" "+e._s(e.timeData.valueTime))])]),e._v(" "),i("div",{staticClass:"bulletBtn"},[i("el-button",{attrs:{type:"primary"},on:{click:e.ableToSee}},[e._v("查看可演练项目")])],1)])]):e._e()],2)])},staticRenderFns:[]};var c=i("VU/8")(l,n,!1,function(e){i("tZa5")},null,null);t.default=c.exports},tZa5:function(e,t){}});
//# sourceMappingURL=12.823ea7cb340b196f8597.js.map