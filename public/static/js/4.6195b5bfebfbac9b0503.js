webpackJsonp([4],{XvBT:function(t,e){},Y2MW:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),n=a("pFYg"),o=a.n(n),l="Bearer "+JSON.parse(localStorage.getItem("user")).token,r={data:function(){return{is_read:!0,showOne:!1,showAdd:!1,addValue:"",pickerOptions1:{disabledDate:function(t){return t.getTime()+864e5<Date.now()}},operationSearchOptions:[{value:"1",label:"药品试剂"},{value:"2",label:"仪器设备"}],operationOptionsValue:"1",operationInputValue:"",storageSelectData:[],operationData:[],operationSelection:[],showNew:!1,newIndex:1,ruleForm:{item_name:"",sort_id:"",stock:"",unit:"",dangerous:"",overdue_at:"",overdue_date:"",frid_id:"",frid_number:"",introduce:"",file:{}},rules:{item_name:[{required:!0,message:"请输入名称",trigger:"blur"}],sort_id:[{required:!0,message:"请选择大类",trigger:"change"}],dangerous:[{required:!0,message:"请选择分类",trigger:"change"}],stock:[{required:!0,message:"请输入入库数量",trigger:"blur"}],unit:[{required:!0,message:"请选择单位",trigger:"change"}],overdue_date:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],frid_id:[{required:!0,message:"请扫描输入标签ID",trigger:"blur"}],frid_number:[{required:!0,message:"请扫描输入标签ID",trigger:"blur"}]},uploadFile:{type:"",item_name:"",sort_id:"",frid_id:"",dangerous:"",stock:"",unit:"",overdue_at:"",introduce:""},mytoken:{Authorization:l},fileList3:[],fileList33:[],imageUrl:"",sortList:[],unitList:[{label:"g"},{label:"ml"},{label:"个"}],dangerousList:[{label:"危险品"},{label:"非危险品"}],showScanning:!1,scanningValue:"",maxLength:24,editStatus:!1,editData:{item_name:"",type:"",sort_id:"",stock:"",unit:"",dangerous:"",overdue_at:"",frid_id:"",frid_number:"",introduce:"",file:{}},editScanningStatus:2,oldScanning:"",uploadEditFile:{item_id:"",type:"",item_name:"",sort_id:"",frid_id:"",stock:"",unit:"",dangerous:"",overdue_at:"",introduce:"",is_putaway:1},addShelfStatus:!1,shelfType:"",singleShelfIndex:"",singleShelfAddress:"",batchShelfData:[],batchLastData:[],batchShelfAddress:"",shelfMapStatus:!1,pointData:[{name:"E仓库A1-1",x:"265",y:"325"},{name:"E仓库A1-2",x:"305",y:"275"},{name:"E仓库A1-3",x:"345",y:"225"},{name:"E仓库A1-4",x:"385",y:"175"},{name:"E仓库A1-5",x:"425",y:"125"},{name:"E仓库A1-6",x:"465",y:"75"},{name:"E仓库B1-1",x:"400",y:"390"},{name:"E仓库B1-2",x:"440",y:"340"},{name:"E仓库B1-3",x:"480",y:"290"},{name:"E仓库B1-4",x:"520",y:"240"},{name:"E仓库B1-5",x:"560",y:"190"},{name:"E仓库B1-6",x:"600",y:"140"},{name:"E仓库C1-1",x:"540",y:"455"},{name:"E仓库C1-2",x:"580",y:"405"},{name:"E仓库C1-3",x:"620",y:"355"},{name:"E仓库C1-4",x:"660",y:"305"},{name:"E仓库C1-5",x:"700",y:"255"},{name:"E仓库C1-6",x:"740",y:"205"},{name:"E仓库D1-1",x:"670",y:"515"},{name:"E仓库D1-2",x:"710",y:"465"},{name:"E仓库D1-3",x:"750",y:"415"},{name:"E仓库D1-4",x:"790",y:"365"},{name:"E仓库D1-5",x:"830",y:"315"},{name:"E仓库D1-6",x:"870",y:"265"}],selectLocation:"",selectIndex:"0",pageIndex:1,pageTotal:0,ws:"",addArr:[]}},created:function(){this.$store.state.sideIndex=-1,this.getAllData(),this.getSortId()},mounted:function(){document.getElementsByClassName("select_input")[0].childNodes[1].children[0].setAttribute("unselectable","on")},beforeDestroy:function(){this.ws&&this.ws.close(),this.timer&&clearInterval(this.timer)},methods:{getSortId:function(){var t=this;this.$axios.post("/sort-list").then(function(e){t.sortList=e.data.data})},addBig:function(){this.showAdd=!0,this.addValue=""},closeAddBox:function(){this.showAdd=!1},confirmAdd:function(){var t=this;""==this.addValue?this.$message({type:"warning",message:"请输入要新增的大类名称!",duration:"1500"}):this.$axios.post("/sort-edit",{name:this.addValue}).then(function(e){console.log(e),0==e.data.status?(t.getSortId(),t.$message({type:"success",message:"新增成功!",duration:"1500"}),t.showAdd=!1):t.$message({type:"warning",message:"新增失败!",duration:"1500"})}).catch(function(e){422==e.status_code&&t.$message({type:"warning",message:"该大类已存在!",duration:"1500"})})},getAllData:function(){var t=this;this.operationData=[],this.$axios.post("/item-list",{item_type:"药品试剂",number:"10"}).then(function(e){void 0==e.data.data.data?(t.pageTotal=0,t.operationData=[]):(t.pageTotal=e.data.data.total,t.operationData=e.data.data.data)})},changeOperationType:function(){var t=this;this.operationSelection=this.storageSelectData=[],this.operationInputValue="",this.pageIndex=1;var e="";1==this.operationOptionsValue?e="药品试剂":2==this.operationOptionsValue&&(e="仪器设备"),this.$axios.post("/item-list",{item_type:e,number:"10"}).then(function(e){void 0==e.data.data.data?(t.pageTotal=0,t.operationData=[]):(t.pageTotal=e.data.data.total,t.operationData=e.data.data.data)})},searchOperationClick:function(){var t=this;this.operationSelection=this.storageSelectData=[];var e="";1==this.operationOptionsValue?e="药品试剂":2==this.operationOptionsValue&&(e="仪器设备"),this.pageIndex=1,this.$axios.post("/item-list",{item_type:e,number:"10",item_name:this.operationInputValue}).then(function(e){void 0==e.data.data.data?(t.pageTotal=0,t.operationData=[]):(t.pageTotal=e.data.data.total,t.operationData=e.data.data.data)}).catch(function(t){})},connectionClick:function(){var t=this;this.ws=new WebSocket("ws://127.0.0.1/tag-pool"),this.ws.onopen=function(e){t.showNew=!0,t.ruleForm={item_name:"",sort_id:"",stock:"",unit:"",dangerous:"",overdue_at:"",overdue_date:"",frid_id:"",frid_number:"",introduce:"",file:{}},t.imageUrl="",t.newIndex=1,t.$nextTick(function(){for(var t=document.getElementsByClassName("add_input"),e=0;e<t.length;e++){t[e].childNodes[1].children[0].setAttribute("unselectable","on")}})},this.ws.onclose=function(t){},this.ws.onerror=function(e){t.$message({message:"请先连接硬件并开启软件！",type:"warning",duration:"2000"}),t.ws=""}},newStorage:function(){this.ws?(this.showNew=!0,this.ruleForm={item_name:"",sort_id:"",stock:"",unit:"",dangerous:"",overdue_at:"",overdue_date:"",frid_id:"",frid_number:"",introduce:"",file:{}},this.imageUrl="",this.newIndex=1):this.$message({type:"warning",message:"请先连接设备!",duration:"1500"})},goOne:function(){this.resetForm("ruleForm"),this.ruleForm.overdue_at="",this.ruleForm.overdue_date="",this.ruleForm.file={},this.imageUrl="",this.newIndex=1},goTwo:function(){this.resetForm("ruleForm"),this.ruleForm.file={},this.ruleForm.overdue_at="",this.ruleForm.overdue_date="",this.imageUrl="",this.newIndex=2},handleChangePic:function(t,e){console.log(e),this.ruleForm.file=t,this.imageUrl=t.url,this.showOne=!0},handleExceed:function(t,e){this.$message.warning("当前限制只能上传 1 张图片！")},handleRemove:function(t,e){this.imageUrl="",this.ruleForm.file={},this.showOne=!1},handleAvatarSuccess:function(t,e){0==t.status?(this.showNew=!1,this.handleCurrentChange(this.pageIndex),this.$message({type:"success",message:"新增成功!",duration:"1500"})):this.$message({type:"warning",message:"新增失败!",duration:"1500"})},handleAddError:function(t,e,a){this.$message({type:"warning",message:"新增失败!",duration:"1500"})},onPickAddDate:function(){if(null==this.ruleForm.overdue_date)this.ruleForm.overdue_at="";else{var t=new Date(this.ruleForm.overdue_date),e=t.getFullYear()+"-",a=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",i=t.getDate()<10?"0"+t.getDate():t.getDate();this.ruleForm.overdue_at=e+a+i}},closeNewBox:function(){this.resetForm("ruleForm"),this.ruleForm.file={},this.ruleForm.overdue_at="",this.ruleForm.overdue_date="",this.imageUrl="",this.showNew=!1},scanningClick:function(){if(0==this.ws.readyState)this.$message({type:"warning",message:"正在连接，请稍等!",duration:"1500"});else if(1==this.ws.readyState){var t="",e=this;this.ws.onmessage=function(a){var i=a.data;1==(t=JSON.parse(i)).length&&(e.ruleForm.frid_number=t[0].epc)}}else this.$message({type:"warning",message:"请先开启软件!",duration:"1500"})},submitUpload:function(t){var e=this,a="";a=1==this.newIndex?"药品试剂":"仪器设备",this.$refs[t].validate(function(t){if(!t)return!1;e.$axios.post("/frid-edit",{frid_number:e.ruleForm.frid_number}).then(function(t){"添加成功"==t.data.message?(e.ruleForm.frid_id=t.data.data.id,void 0==e.ruleForm.file.name?e.$axios.post("/item-edit",{item_name:e.ruleForm.item_name,sort_id:e.ruleForm.sort_id,stock:e.ruleForm.stock,unit:e.ruleForm.unit,dangerous:e.ruleForm.dangerous,overdue_at:e.ruleForm.overdue_at,frid_id:e.ruleForm.frid_id,introduce:e.ruleForm.introduce,type:a}).then(function(t){"0"==t.data.status&&(e.handleCurrentChange(e.pageIndex),e.resetForm("ruleForm"),e.ruleForm.file={},e.imageUrl="",e.showNew=!1,e.$message({type:"success",message:"新增成功!",duration:"1500"}))}).catch(function(t){e.$message({type:"warning",message:"新增失败!",duration:"1500"})}):(e.uploadFile.item_name=e.ruleForm.item_name,e.uploadFile.sort_id=e.ruleForm.sort_id,e.uploadFile.stock=e.ruleForm.stock,e.uploadFile.unit=e.ruleForm.unit,e.uploadFile.dangerous=e.ruleForm.dangerous,e.uploadFile.overdue_at=e.ruleForm.overdue_at,e.uploadFile.frid_id=e.ruleForm.frid_id,e.uploadFile.introduce=e.ruleForm.introduce,e.uploadFile.type=a,e.$refs.upload.submit())):(e.$message({type:"warning",message:"该标签已经被使用!",duration:"1500"}),e.ruleForm.frid_number="",e.ruleForm.frid_id="")}).catch(function(t){})})},resetForm:function(t){this.$refs[t].resetFields()},changeEditDate:function(){if(null==this.editData.overdue_at)this.editData.overdue_at="";else{var t=new Date(this.editData.overdue_at),e=t.getFullYear()+"-",a=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",i=t.getDate()<10?"0"+t.getDate():t.getDate();this.editData.overdue_at=e+a+i}},editClick:function(t){this.editScanningStatus=2,this.editStatus=!0,this.editData=t,this.oldScanning=t.frid_number,this.editData.photo?this.imageUrl=this.$store.state.operationPhotoPath+this.editData.photo.split("/")[1]:this.imageUrl="",this.$nextTick(function(){for(var t=document.getElementsByClassName("add_input"),e=0;e<t.length;e++){t[e].childNodes[1].children[0].setAttribute("unselectable","on")}})},handleEditSuccess:function(t,e){0==t.status?(this.editStatus=!1,this.handleCurrentChange(this.pageIndex),this.$message({type:"success",message:"修改成功!",duration:"1500"})):this.$message({type:"warning",message:"修改失败!",duration:"1500"})},scanningEditClick:function(){var t=this;this.ws=new WebSocket("ws://127.0.0.1/tag-pool"),this.ws.onopen=function(e){t.editScanningStatus=1,t.$message({message:"请扫描物品！",type:"warning",duration:"2000"})};var e="";this.ws.onmessage=function(a){var i=a.data;1==(e=JSON.parse(i)).length&&(t.editData.frid_number=e[0].epc)},this.ws.onclose=function(t){},this.ws.onerror=function(e){t.$message({message:"请先连接硬件并开启软件！",type:"warning",duration:"2000"}),t.ws=""}},handleEditError:function(t,e,a){this.$message({type:"warning",message:"修改失败!",duration:"1500"})},handleChangeEditPic:function(t,e){this.editData.file=t,this.imageUrl=t.url},handleEditRemove:function(){this.imageUrl="",this.editData.file={}},submitEdit:function(t){var e=this,a="";a=1==this.operationOptionsValue?"药品试剂":"仪器设备",this.$refs[t].validate(function(t){if(!t)return!1;e.editData.frid_number!=e.oldScanning?e.$axios.post("/frid-edit",{frid_number:e.editData.frid_number}).then(function(t){"添加成功"==t.data.message?(e.editData.frid_id=t.data.data.id,void 0==e.editData.file?e.$axios.post("/item-edit",{item_id:e.editData.item_id,item_name:e.editData.item_name,sort_id:e.editData.sort_id,stock:e.editData.stock,unit:e.editData.unit,dangerous:e.editData.dangerous,overdue_at:e.editData.overdue_at,frid_id:e.editData.frid_id,introduce:e.editData.introduce,is_putaway:1,s_content:"",situation:"",type:a}).then(function(t){"0"==t.data.status?(e.handleCurrentChange(e.pageIndex),e.editStatus=!1,e.$message({type:"success",message:"修改成功!",duration:"1500"}),e.editScanningStatus=2):e.$message({type:"warning",message:"修改失败!",duration:"1500"})}).catch(function(t){}):(e.uploadEditFile.item_id=e.editData.item_id,e.uploadEditFile.item_name=e.editData.item_name,e.uploadEditFile.sort_id=e.editData.sort_id,e.uploadEditFile.stock=e.editData.stock,e.uploadEditFile.unit=e.editData.unit,e.uploadEditFile.dangerous=e.editData.dangerous,e.uploadEditFile.overdue_at=e.editData.overdue_at,e.uploadEditFile.frid_id=e.editData.frid_id,e.uploadEditFile.introduce=e.editData.introduce,e.uploadEditFile.is_putaway=1,e.uploadEditFile.type=a,e.$refs.upload.submit())):(e.$message({type:"warning",message:"该标签已经被使用!",duration:"1500"}),e.editData.frid_number="",e.editData.frid_id="")}).catch(function(t){}):void 0==e.editData.file?e.$axios.post("/item-edit",{item_id:e.editData.item_id,item_name:e.editData.item_name,sort_id:e.editData.sort_id,stock:e.editData.stock,unit:e.editData.unit,dangerous:e.editData.dangerous,overdue_at:e.editData.overdue_at,frid_id:e.editData.frid_id,introduce:e.editData.introduce,is_putaway:1,s_content:"",situation:"",type:a}).then(function(t){"0"==t.data.status?(e.handleCurrentChange(e.pageIndex),e.editStatus=!1,e.$message({type:"success",message:"修改成功!",duration:"1500"})):e.$message({type:"warning",message:"修改失败!",duration:"1500"})}).catch(function(t){}):(e.uploadEditFile.item_id=e.editData.item_id,e.uploadEditFile.item_name=e.editData.item_name,e.uploadEditFile.sort_id=e.editData.sort_id,e.uploadEditFile.stock=e.editData.stock,e.uploadEditFile.unit=e.editData.unit,e.uploadEditFile.dangerous=e.editData.dangerous,e.uploadEditFile.overdue_at=e.editData.overdue_at,e.uploadEditFile.frid_id=e.editData.frid_id,e.uploadEditFile.introduce=e.editData.introduce,e.uploadEditFile.is_putaway=1,e.uploadEditFile.type=a,e.$refs.upload.submit())})},closeEditBox:function(){this.resetForm("editData"),this.editData.file={},this.imageUrl="",this.editStatus=!1,this.handleCurrentChange(this.pageIndex),this.$message({type:"info",message:"已取消编辑",duration:"1500"})},operationSelectionChange:function(t){},checkSingle:function(t,e){var a=!0,i="";for(var s in this.storageSelectData)this.storageSelectData[s].item_id==e.item_id&&(a=!1,i=s);a?this.storageSelectData.push(e):this.storageSelectData.splice(i,1),this.operationSelection=this.storageSelectData},checkAll:function(t){if(0==t.length){for(var e in this.operationData)for(var a in this.storageSelectData)this.operationData[e].item_id==this.storageSelectData[a].item_id&&this.storageSelectData.splice(a,1);this.operationSelection=this.storageSelectData}else{if(0==this.storageSelectData.length)this.storageSelectData=t;else for(var i in t)this.storageSelectData.push(t[i]);this.storageSelectData=this.unique(this.storageSelectData),this.operationSelection=this.storageSelectData}},unique:function(t){var e={};return t.filter(function(t,a,i){return!e.hasOwnProperty((void 0===t?"undefined":o()(t))+s()(t))&&(e[(void 0===t?"undefined":o()(t))+s()(t)]=!0)})},singleAddShelf:function(t){this.shelfType="single",this.singleShelfIndex=t.item_id,this.selectIndex=0,this.shelfMapStatus=!0,this.selectLocation=this.pointData[0]},chooseLocationClick:function(t,e){this.selectIndex=e,this.selectLocation=t;var a=document.getElementById("sideBox");e<11?a.scrollTop=0:e>=11&&e<22?a.scrollTop=429:e>=22&&(a.scrollTop=858)},chooseLocationRightClick:function(t,e){this.selectIndex=e,this.selectLocation=t},confirmShelfLocation:function(){var t=this,e="POINT("+((parseInt(this.selectLocation.x)+15)/1200).toFixed(3)+" "+((parseInt(this.selectLocation.y)+30)/900).toFixed(3)+")";if("single"==this.shelfType){var a=[{item_id:this.singleShelfIndex,situation:e,s_content:this.selectLocation.name}];this.$axios.post("/item-is",{item:a}).then(function(e){"0"==e.data.status?(t.handleCurrentChange(1),t.$message({message:"上架成功！",type:"success",duration:"1000"}),t.operationSelection=t.storageSelectData=[]):t.$message({message:"上架失败！",type:"warning",duration:"1000"})}).catch(function(t){})}else if("lot"==this.shelfType)for(var i in this.batchShelfData)this.batchShelfData[i].address=this.pointData[this.selectIndex].name,this.batchShelfAddress=this.pointData[this.selectIndex];this.shelfMapStatus=!1},compare:function(t){return function(e,a){return e[t]-a[t]}},batchAddShelf:function(){0==this.operationSelection.length||(this.shelfType="lot",this.addShelfStatus=!0,this.batchShelfData=this.operationSelection.sort(this.compare("item_id")))},chooseShelfLocation:function(){this.shelfMapStatus=!0,this.selectIndex=0,this.selectLocation=this.pointData[0]},tableRowClassName:function(t){t.row,t.rowIndex;this.batchShelfAddress},handleSelectionChange:function(t){this.batchLastData=t},batchConfirmShelf:function(){var t=this;if(0==this.batchLastData.length)this.$message({message:"请先选择要勾选上架的物品！",type:"warning",duration:"2000"});else{var e="POINT("+((parseInt(this.selectLocation.x)+15)/1200).toFixed(3)+" "+((parseInt(this.selectLocation.y)+30)/900).toFixed(3)+")",a=[];for(var i in this.batchLastData)void 0==this.batchLastData[i].address||a.push({item_id:this.batchLastData[i].item_id,situation:e,s_content:this.selectLocation.name});this.$axios.post("/item-is",{item:a}).then(function(e){if("0"==e.data.status){for(var a in t.handleCurrentChange(1),t.$message({message:"上架成功！",type:"success",duration:"1500"}),t.addShelfStatus=!1,t.batchShelfAddress="",t.batchShelfData=[],t.operationSelection)a<t.operationSelection&&(t.operationSelection[a].address="");t.operationSelection=t.storageSelectData=[]}else t.$message({message:"上架失败！",type:"warning",duration:"1500"})}).catch(function(t){})}},closeBatchBox:function(){for(var t in this.addShelfStatus=!1,this.batchShelfData=[],this.batchShelfAddress="",this.operationSelection)t<this.operationSelection&&(this.operationSelection[t].address="")},closeShelfMap:function(){this.shelfMapStatus=!1},batchDelete:function(){var t=this;if(0==this.operationSelection.length);else{var e=[];for(var a in this.operationSelection)e.push({item_id:this.operationSelection[a].item_id});this.$confirm("此操作将永久删除被选中的数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.post("/item-del",{item:e}).then(function(e){0==e.data.status&&(t.$message({type:"success",message:"删除成功!",duration:"1500"}),t.operationSelection=t.storageSelectData=[],t.handleCurrentChange(1))}).catch(function(t){})}).catch(function(){t.$message({type:"info",message:"已取消删除",duration:"1500"})})}},handleCurrentChange:function(t){var e=this;this.pageIndex=t;var a="";1==this.operationOptionsValue?a="药品试剂":2==this.operationOptionsValue&&(a="仪器设备"),this.$axios.post("/item-list",{item_type:a,number:"10",page:t,item_name:this.operationInputValue}).then(function(t){var a=[];if(t.data.data){for(var i in e.pageTotal=t.data.data.total,e.operationData=t.data.data.data,e.operationData)for(var s in e.storageSelectData)e.operationData[i].item_id==e.storageSelectData[s].item_id&&a.push(e.operationData[i]);e.$nextTick(function(){this.checkedChoose(a)})}else e.pageTotal=0,e.operationData=[]})},checkedChoose:function(t){var e=this;t.forEach(function(t){e.$refs.operationTable.toggleRowSelection(t,!0)})}},filters:{over_date:function(t){return t?t.split(" ")[0]:""}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"storageOperation"},[t._m(0),t._v(" "),i("div",{staticClass:"operation_title"},[i("span",[t._v("入库物品信息列表")]),t._v(" "),i("div",{staticClass:"search_input el-input el-input--suffix"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.operationInputValue,expression:"operationInputValue"}],staticClass:"p_search el-input__inner",attrs:{autocomplete:"off",placeholder:"请输入要搜索的物品名称",type:"text",rows:"2",validateevent:"true",suffixicon:"el-icon-search"},domProps:{value:t.operationInputValue},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter")&&t._k(e.keyCode,"active",void 0,e.key,void 0))return null;t.searchOperationClick()},input:function(e){e.target.composing||(t.operationInputValue=e.target.value)}}}),t._v(" "),i("span",{staticClass:"el-input__suffix",on:{click:function(e){t.searchOperationClick()}}},[t._m(1)])]),t._v(" "),i("el-select",{staticClass:"select_input",on:{change:function(e){t.changeOperationType()}},model:{value:t.operationOptionsValue,callback:function(e){t.operationOptionsValue=e},expression:"operationOptionsValue"}},t._l(t.operationSearchOptions,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),i("el-button",{class:0!=t.operationSelection.length?"right_btn":"disClick",attrs:{type:"primary"},on:{click:function(e){t.batchDelete()}}},[t._v("批量删除")]),t._v(" "),i("el-button",{class:0!=t.operationSelection.length?"right_btn":"disClick",attrs:{type:"primary"},on:{click:function(e){t.batchAddShelf()}}},[t._v("批量上架")]),t._v(" "),i("el-button",{staticClass:"right_btn",attrs:{type:"primary"},on:{click:function(e){t.addBig()}}},[t._v("新增大类")]),t._v(" "),i("el-button",{staticClass:"connect right_btn",attrs:{type:"primary"},on:{click:function(e){t.connectionClick()}}},[t._v("新增入库")])],1),t._v(" "),i("el-table",{ref:"operationTable",staticClass:"operation_table",staticStyle:{width:"100%"},attrs:{data:t.operationData,stripe:"","tooltip-effect":"dark"},on:{"selection-change":t.operationSelectionChange,select:t.checkSingle,"select-all":t.checkAll}},[i("el-table-column",{attrs:{type:"selection",width:"55"}},[t._v("全选")]),t._v(" "),i("el-table-column",{attrs:{prop:"item_id",label:"物品编号",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"frid_number",label:"标签ID",width:"100","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"item_name",label:"物品名称",width:"150"}}),t._v(" "),i("el-table-column",{attrs:{prop:"type",label:"类型",width:"120"}}),t._v(" "),i("el-table-column",{attrs:{prop:"sort_name",label:"大类名称",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"dangerous",label:"分类"}}),t._v(" "),i("el-table-column",{attrs:{prop:"stock",label:"数量"}}),t._v(" "),i("el-table-column",{attrs:{prop:"unit",label:"单位"}}),t._v(" "),i("el-table-column",{attrs:{label:1==t.operationOptionsValue?"过期时间":"下次维护时间",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.overdue_at))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"introduce",label:"备注",width:"200","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"last operating",on:{click:function(a){t.editClick(e.row)}}},[t._v("编辑")]),t._v(" "),i("span",{staticClass:"last"},[t._v("|")]),t._v(" "),i("span",{staticClass:"last operating",on:{click:function(a){t.singleAddShelf(e.row)}}},[t._v("上架")])]}}])})],1),t._v(" "),i("div",{staticClass:"block",staticStyle:{"text-align":"center","margin-top":"30px"}},[i("el-pagination",{attrs:{"current-page":t.pageIndex,"page-size":10,layout:"total, prev, pager, next, jumper",total:t.pageTotal},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.pageIndex=e}}})],1),t._v(" "),t.showNew?i("div",{staticClass:"mask_box"},[i("div",{staticClass:"new_storage"},[i("div",{staticClass:"new_title"},[i("span",[t._v("新增入库")]),t._v(" "),i("i",{staticClass:"el-icon-close",on:{click:function(e){t.closeNewBox()}}})]),t._v(" "),i("ul",{staticClass:"tabs_lists"},[i("li",{class:1==t.newIndex?"stock_tabs_active":"",on:{click:function(e){t.goOne()}}},[t._v("\n                    试剂入库\n                    "),i("span")]),t._v(" "),i("li",{class:2==t.newIndex?"stock_tabs_active":"",on:{click:function(e){t.goTwo()}}},[t._v("\n                    仪器入库\n                    "),i("span")])]),t._v(" "),i("div",{staticClass:"new_main"},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"名称",prop:"item_name"}},[i("el-input",{model:{value:t.ruleForm.item_name,callback:function(e){t.$set(t.ruleForm,"item_name",e)},expression:"ruleForm.item_name"}})],1),t._v(" "),i("div",{staticClass:"right_picture right_upload",class:t.showOne?"show_one":""},[i("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{action:"/api/item-edit","show-file-list":!0,accept:"image/*","on-success":t.handleAvatarSuccess,"on-error":t.handleAddError,headers:t.mytoken,"list-type":"picture-card",limit:1,"on-remove":t.handleRemove,"on-exceed":t.handleExceed,"on-change":t.handleChangePic,data:t.uploadFile,"file-list":t.fileList33,"auto-upload":!1}},[i("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),t._v(" "),i("el-button",{staticClass:"up"},[t._v("上传图片")])],1),t._v(" "),t.imageUrl?t._e():i("div",{staticClass:"normalImg"},[1==t.newIndex?i("img",{staticClass:"avatar",attrs:{src:a("FGnH")}}):t._e(),t._v(" "),2==t.newIndex?i("img",{staticClass:"avatar",attrs:{src:a("6mcn")}}):t._e()])],1),t._v(" "),i("el-form-item",{attrs:{label:"大类",prop:"sort_id"}},[i("el-select",{staticClass:"add_input",model:{value:t.ruleForm.sort_id,callback:function(e){t.$set(t.ruleForm,"sort_id",e)},expression:"ruleForm.sort_id"}},t._l(t.sortList,function(t,e){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"入库数量",prop:"stock"}},[i("el-input",{model:{value:t.ruleForm.stock,callback:function(e){t.$set(t.ruleForm,"stock",e)},expression:"ruleForm.stock"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"单位",prop:"unit"}},[i("el-select",{staticClass:"add_input",model:{value:t.ruleForm.unit,callback:function(e){t.$set(t.ruleForm,"unit",e)},expression:"ruleForm.unit"}},t._l(t.unitList,function(t,e){return i("el-option",{key:t.label,attrs:{label:t.label,value:t.label}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"分类",prop:"dangerous"}},[i("el-select",{staticClass:"add_input",model:{value:t.ruleForm.dangerous,callback:function(e){t.$set(t.ruleForm,"dangerous",e)},expression:"ruleForm.dangerous"}},t._l(t.dangerousList,function(t,e){return i("el-option",{key:t.label,attrs:{label:t.label,value:t.label}})}))],1),t._v(" "),1==t.newIndex?i("el-form-item",{staticClass:"time",attrs:{label:"过期时间"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"","picker-options":t.pickerOptions1},on:{change:function(e){t.onPickAddDate()}},model:{value:t.ruleForm.overdue_date,callback:function(e){t.$set(t.ruleForm,"overdue_date",e)},expression:"ruleForm.overdue_date"}})],1):t._e(),t._v(" "),2==t.newIndex?i("el-form-item",{staticClass:"time",attrs:{label:"下次维护时间"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"","picker-options":t.pickerOptions1},on:{change:function(e){t.onPickAddDate()}},model:{value:t.ruleForm.overdue_date,callback:function(e){t.$set(t.ruleForm,"overdue_date",e)},expression:"ruleForm.overdue_date"}})],1):t._e(),t._v(" "),i("el-form-item",{staticClass:"label_id",attrs:{label:"电子标签ID",prop:"frid_number"}},[i("el-input",{attrs:{readonly:t.is_read},model:{value:t.ruleForm.frid_number,callback:function(e){t.$set(t.ruleForm,"frid_number",e)},expression:"ruleForm.frid_number"}}),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.scanningClick()}}},[t._v("扫描绑定")])],1),t._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"introduce"}},[i("el-input",{attrs:{type:"textarea",resize:"none"},model:{value:t.ruleForm.introduce,callback:function(e){t.$set(t.ruleForm,"introduce",e)},expression:"ruleForm.introduce"}})],1)],1),t._v(" "),i("div",{staticClass:"btn"},[i("el-button",{on:{click:function(e){t.submitUpload("ruleForm")}}},[t._v("确认")])],1)],1)])]):t._e(),t._v(" "),t.showScanning?i("div",{staticClass:"scanning_box"},[i("div",[i("div",{staticClass:"scanning_title"},[i("span",[t._v("请扫描")]),t._v(" "),i("i",{staticClass:"el-icon-close",on:{click:function(e){t.closeScanningBox()}}})]),t._v(" "),i("el-input",{attrs:{type:"password",maxlength:t.maxLength,autofocus:""},model:{value:t.scanningValue,callback:function(e){t.scanningValue=e},expression:"scanningValue"}}),t._v(" "),i("div",{staticClass:"btn"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.confimScanning()}}},[t._v("确认")])],1)],1)]):t._e(),t._v(" "),t.editStatus?i("div",{staticClass:"mask_box"},[i("div",{staticClass:"edit_box"},[i("div",{staticClass:"edit_title"},[i("span",[t._v("编辑")]),t._v(" "),i("i",{staticClass:"el-icon-close",on:{click:function(e){t.closeEditBox()}}})]),t._v(" "),i("div",{staticClass:"edit_main"},[i("el-form",{ref:"editData",staticClass:"demo-ruleForm",attrs:{model:t.editData,rules:t.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"名称",prop:"item_name"}},[i("el-input",{attrs:{readonly:""},model:{value:t.editData.item_name,callback:function(e){t.$set(t.editData,"item_name",e)},expression:"editData.item_name"}})],1),t._v(" "),i("div",{staticClass:"right_picture"},[i("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{action:"/api/item-edit","show-file-list":!1,accept:"image/*","on-success":t.handleEditSuccess,"on-error":t.handleEditError,headers:t.mytoken,"on-change":t.handleChangeEditPic,data:t.uploadEditFile,"file-list":t.fileList3,"auto-upload":!1}},[t.imageUrl?t._e():i("div",[1==t.operationOptionsValue?i("img",{staticClass:"avatar",attrs:{src:a("FGnH")}}):t._e(),t._v(" "),2==t.operationOptionsValue?i("img",{staticClass:"avatar",attrs:{src:a("6mcn")}}):t._e()]),t._v(" "),t.imageUrl?i("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):t._e(),t._v(" "),i("el-button",{staticClass:"up"},[t._v("修改图片")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"大类",prop:"sort_id"}},[i("el-select",{staticClass:"add_input",model:{value:t.editData.sort_id,callback:function(e){t.$set(t.editData,"sort_id",e)},expression:"editData.sort_id"}},t._l(t.sortList,function(t,e){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"入库数量",prop:"stock"}},[i("el-input",{model:{value:t.editData.stock,callback:function(e){t.$set(t.editData,"stock",e)},expression:"editData.stock"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"单位",prop:"unit"}},[i("el-select",{staticClass:"add_input",attrs:{placeholder:""},model:{value:t.editData.unit,callback:function(e){t.$set(t.editData,"unit",e)},expression:"editData.unit"}},t._l(t.unitList,function(t,e){return i("el-option",{key:t.label,attrs:{label:t.label,value:t.label}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"分类",prop:"dangerous"}},[i("el-select",{staticClass:"add_input",model:{value:t.editData.dangerous,callback:function(e){t.$set(t.editData,"dangerous",e)},expression:"editData.dangerous"}},t._l(t.dangerousList,function(t,e){return i("el-option",{key:t.label,attrs:{label:t.label,value:t.label}})}))],1),t._v(" "),i("el-form-item",{staticClass:"time",attrs:{label:1==t.operationOptionsValue?"过期时间":"下次维护时间"}},[i("el-date-picker",{attrs:{type:"date","picker-options":t.pickerOptions1},on:{change:function(e){t.changeEditDate()}},model:{value:t.editData.overdue_at,callback:function(e){t.$set(t.editData,"overdue_at",e)},expression:"editData.overdue_at"}})],1),t._v(" "),i("el-form-item",{staticClass:"label_id",attrs:{label:"电子标签ID",prop:"frid_number"}},[i("el-input",{attrs:{readonly:t.is_read},model:{value:t.editData.frid_number,callback:function(e){t.$set(t.editData,"frid_number",e)},expression:"editData.frid_number"}}),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.scanningEditClick()}}},[t._v("扫描绑定")])],1),t._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"introduce"}},[i("el-input",{attrs:{type:"textarea"},model:{value:t.editData.introduce,callback:function(e){t.$set(t.editData,"introduce",e)},expression:"editData.introduce"}})],1)],1),t._v(" "),i("div",{staticClass:"btn"},[i("el-button",{on:{click:function(e){t.submitEdit("editData")}}},[t._v("确认")])],1)],1)])]):t._e(),t._v(" "),t.addShelfStatus?i("div",{staticClass:"mask_box"},[i("div",{staticClass:"add_shelf"},[i("div",{staticClass:"add_title"},[i("span",[t._v("批量上架")]),t._v(" "),i("i",{staticClass:"el-icon-close",on:{click:function(e){t.closeBatchBox()}}})]),t._v(" "),i("div",{staticClass:"add_main"},[i("div",{staticClass:"main_header"},[i("span",[t._v("上架物品清单")]),t._v(" "),i("div",{staticClass:"iconfont el-icon-pharmaceutical_administration-weizhi",on:{click:function(e){t.chooseShelfLocation()}}},[i("span",[t._v("选择上架位置")])])]),t._v(" "),i("div",{staticClass:"data"},[i("el-table",{ref:"multipleTable",staticClass:"data_table",staticStyle:{width:"100%"},attrs:{data:t.batchShelfData,stripe:"","max-height":"379","tooltip-effect":"dark","row-class-name":t.tableRowClassName},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}},[t._v("全选")]),t._v(" "),i("el-table-column",{attrs:{prop:"item_id",label:"物品编号",width:"80"}}),t._v(" "),i("el-table-column",{attrs:{prop:"item_name",label:"物品名称"}}),t._v(" "),i("el-table-column",{attrs:{prop:"frid_number",label:"标签ID",width:"100","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"sort_name",label:"大类"}}),t._v(" "),i("el-table-column",{attrs:{prop:"stock",label:"数量",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"unit",label:"单位"}}),t._v(" "),i("el-table-column",{attrs:{prop:"address",label:"上架位置"}})],1)],1),t._v(" "),i("div",{staticClass:"btn"},[i("el-button",{class:t.batchShelfAddress?"":"unClick",on:{click:function(e){t.batchConfirmShelf()}}},[t._v("确认上架")])],1)])])]):t._e(),t._v(" "),t.shelfMapStatus?i("div",{staticClass:"map_box"},[i("div",{staticClass:"shelf_map"},[i("div",{staticClass:"map_title"},[i("span",[t._v("选择上架位置")]),t._v(" "),i("i",{staticClass:"el-icon-close",on:{click:function(e){t.closeShelfMap()}}})]),t._v(" "),i("div",{staticClass:"tip"},[i("span",[t._v("当前所选位置：")]),t._v(" "),i("span",{staticClass:"address"},[t._v(t._s(t.selectLocation.name))])]),t._v(" "),i("div",{staticClass:"right_list",attrs:{id:"sideBox"}},[i("ul",t._l(t.pointData,function(e,a){return i("li",{key:a,class:a==t.selectIndex?"is_active":"",on:{click:function(i){t.chooseLocationRightClick(e,a)}}},[t._v("\n                        "+t._s(e.name)+"\n                        "),i("span",{staticClass:"iconfont el-icon-pharmaceutical_administration-dingwei-"})])}))]),t._v(" "),i("div",{staticClass:"map_main"},[i("img",{attrs:{src:a("yQ30"),alt:""}}),t._v(" "),i("ul",{staticClass:"point_list"},t._l(t.pointData,function(e,a){return i("li",{key:a,staticClass:"iconfont el-icon-pharmaceutical_administration-dingwei-",class:a==t.selectIndex?"active":"",style:"position: absolute;top: "+e.y+"px;left:"+e.x+"px;",on:{click:function(i){t.chooseLocationClick(e,a)}}},[i("div",{style:a==t.selectIndex?"display:block;":"display:none;"},[t._v("\n                            "+t._s(e.name)+"\n                            "),i("span")])])})),t._v(" "),i("div",{staticClass:"btn"},[i("el-button",{on:{click:function(e){t.confirmShelfLocation()}}},[t._v("确认上架位置")])],1)])])]):t._e(),t._v(" "),t.showAdd?i("div",{staticClass:"add-model"},[i("div",{staticClass:"box"},[i("div",{staticClass:"title"},[i("span",[t._v("新增大类")]),t._v(" "),i("i",{staticClass:"el-icon-close",on:{click:function(e){t.closeAddBox()}}})]),t._v(" "),i("el-input",{attrs:{placeholder:"请输入大类名称"},model:{value:t.addValue,callback:function(e){t.addValue=e},expression:"addValue"}}),t._v(" "),i("el-button",{on:{click:function(e){t.confirmAdd()}}},[t._v("确认")])],1)]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bread_crumb"},[e("span",[this._v("当前位置：")]),this._v(" "),e("span",[this._v("入库操作")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"el-input__suffix-inner"},[e("i",{staticClass:"el-input__icon iconfont el-icon-pharmaceutical_administration-sousuo"})])}]};var c=a("VU/8")(r,d,!1,function(t){a("XvBT")},null,null);e.default=c.exports}});
//# sourceMappingURL=4.6195b5bfebfbac9b0503.js.map