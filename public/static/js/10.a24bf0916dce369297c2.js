webpackJsonp([10],{FIzB:function(t,a){},O4S4:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e={data:function(){return{project_id:"",countMax:{should:"",already:"",not:""},signMaxLists:[],drawResultList:[],maxDrawResult:!1,isMaxDraw:!0,timeMaxDraw:"",timeStart:""}},created:function(){this.$store.state.loading=!0,this.project_id=localStorage.drill_project,this.getDrawList(),this.judgeDraw()},mounted:function(){var t=this;this.timeMaxDraw=setInterval(function(){t.maxDrawResult&&clearInterval(t.timeMaxDraw),t.getDrawList(),t.isMaxDraw&&t.judgeDraw()},5e3),this.timeStart=setInterval(function(){t.getMaxStart()},2e3)},methods:{getDrawList:function(){var t=this;this.$axios.post("/api/user-sign",{design_id:this.project_id}).then(function(a){var s=[],e=[];if("0"==a.data.status){if(0==a.data.data.score_user.length)for(var i in a.data.data)s.push(a.data.data[i]);else{for(var n in a.data.data)s.push(a.data.data[n]);s.pop(),s.push(a.data.data.score_user[0])}for(var r in s)"0"!=s[r].character&&e.push(s[r])}t.signMaxLists=e,t.countMax.should=t.signMaxLists.length;var o=0;for(var u in t.signMaxLists)"1"==t.signMaxLists[u].user_status&&o++;t.countMax.already=o}).catch(function(){})},judgeDraw:function(){var t=this;this.$axios.post("/api/the-draw",{design_id:this.project_id}).then(function(a){if(a.data.data)if("此演练不分组"==a.data.data[0].name)t.$store.state.loading=!1,t.maxDrawResult=!1,t.isMaxDraw=!1;else{if(0==a.data.data[0].user.length)t.isMaxDraw=!0,t.maxDrawResult=!1;else{var s=a.data.data;for(var e in a.data.data)for(var i in a.data.data[e].user)s[e].user[i].section_one=s[e].user[i].section.section_one,s[e].user[i].section_two=s[e].user[i].section.section_two,s[e].user[i].user_name=s[e].user[i].name;t.drawResultList=s,t.maxDrawResult=!0,t.isMaxDraw=!1}t.$store.state.loading=!1}}).catch(function(t){})},getMaxStart:function(){var t=this;this.$axios.post("/api/look-status",{design_id:this.project_id}).then(function(a){null!==a.data.data.design_location&&(t.$router.push("/maxplay"),clearInterval(t.timeStart))}).catch(function(t){console.log(t)})}}},i={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.$store.state.loading,expression:"$store.state.loading"}],staticClass:"max-group"},[s("h3",[t._v("参演人员签到列表")]),t._v(" "),s("div",{staticClass:"shouldMax"},[s("p",[s("span",[t._v("应到人数 "+t._s(t.countMax.should))]),t._v(" "),s("span",[t._v("已到人数"),s("span",{staticStyle:{color:"#4a90e2"}},[t._v(" "+t._s(t.countMax.already))])]),t._v(" "),s("span",[t._v("未到人数"),s("span",{staticStyle:{color:"#d0021b"}},[t._v(" "+t._s(t.countMax.should-t.countMax.already))])])]),t._v(" "),s("div",{staticStyle:{"font-size":"16px",height:"25px","line-height":"25px","margin-bottom":"10px"}},[t._v("参演者")]),t._v(" "),s("ul",{staticClass:"draw_list"},t._l(t.signMaxLists,function(a,e){return 1==a.character?s("li",{key:e,class:"1"==a.user_status?"already_sign":""},[s("i",{staticClass:"iconfont el-icon-emergency-dagou1"}),t._v(" "),s("span",[t._v(t._s(a.user_name))]),t._v(" "),s("span",[t._v(t._s(a.section_one)+t._s(a.section_two))])]):t._e()})),t._v(" "),s("div",{staticStyle:{"font-size":"16px",height:"25px","line-height":"25px","margin-bottom":"10px"}},[t._v("点评或评分人")]),t._v(" "),s("ul",{staticClass:"draw_list"},t._l(t.signMaxLists,function(a,e){return 1!=a.character?s("li",{key:e,class:"1"==a.user_status?"already_sign":""},[s("i",{staticClass:"iconfont el-icon-emergency-dagou1"}),t._v(" "),s("span",[t._v(t._s(a.user_name))]),t._v(" "),s("span",[t._v(t._s(a.section_one)+t._s(a.section_two))])]):t._e()}))]),t._v(" "),t.maxDrawResult?s("h3",[t._v("抽签结果")]):t._e(),t._v(" "),t.maxDrawResult?s("div",{staticClass:"draw_result"},[s("ul",t._l(t.drawResultList,function(a,e){return s("li",{key:e},[s("div",{staticClass:"groupName"},[t._v(t._s(a.name))]),t._v(" "),s("div",{staticClass:"groupList"},t._l(a.user,function(a,e){return s("p",{key:e},[s("span",[t._v(t._s(a.user_name))]),t._v(" "),s("span",[t._v(t._s(a.section_one)+t._s(a.section_two))])])}))])}))]):t._e()])},staticRenderFns:[]};var n=s("VU/8")(e,i,!1,function(t){s("FIzB")},null,null);a.default=n.exports}});
//# sourceMappingURL=10.a24bf0916dce369297c2.js.map