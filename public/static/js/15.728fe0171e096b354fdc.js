webpackJsonp([15],{b3Gy:function(t,e){},poHt:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("mvHQ"),o=i.n(s),a=i("pFYg"),n=i.n(a),r={data:function(){return{myShow:!1,dialogVisible:!1,ruleForm:{region:"",dept:""},EditForm:{section_one:"",section_two:""},rules2:{region:[{required:!0,message:"请输入地区",trigger:"blur"}],dept:[{required:!0,message:"请输入部门",trigger:"blur"}]},rules:{section_one:[{required:!0,message:"请输入地区",trigger:"blur"}],section_two:[{required:!0,message:"请输入部门",trigger:"blur"}]},isShow:!1,EditShow:!1,currentPage:1,content:"",total:0,addRegions:[],lists:[],Choice:[{value:"部门",label:"部门"},{value:"地区",label:"地区"}],value:"地区",deptId:""}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.$axios.post("/api/section-add",{section_one:e.ruleForm.region,section_two:e.ruleForm.dept}).then(function(t){"成功"==t.data.message&&(e.$message({message:"添加成功",type:"success"}),e.isShow=!e.isShow,e.getDepartment(e.currentPage),e.resetForm("ruleForm"))}).catch(function(t){})})},resetForm:function(t){this.$refs[t].resetFields()},submitEditForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.$axios.post("/api/section-save",{id:e.deptId,section_one:e.EditForm.section_one,section_two:e.EditForm.section_two}).then(function(t){"成功"==t.data.message&&(e.$message({message:"成功",type:"success"}),e.EditShow=!e.EditShow,e.getDepartment(e.currentPage),e.resetForm("EditForm"))}).catch(function(t){})})},getDepartment:function(t){var e=this;this.$axios.post("/api/section-list",{number:10,page:t}).then(function(t){for(var i in t.data.data.data)e.total=t.data.data.total;e.lists=t.data.data.data,e.$store.state.loading=!1}).catch(function(t){console.log(t)})},unique:function(t){var e={};return t.filter(function(t,i,s){return!e.hasOwnProperty((void 0===t?"undefined":n()(t))+o()(t))&&(e[(void 0===t?"undefined":n()(t))+o()(t)]=!0)})},deltPer:function(t){var e=this;this.$confirm("此操作将永久删除该部门, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$axios.post("/api/section-del",{id:t}).then(function(t){"成功"===t.data.message?(e.$message({message:"删除成功",type:"success"}),e.getDepartment(e.currentPage)):422==t.data.status&&e.$message.error("无法删除，部门下有相关人员!")}).catch(function(t){console.log(t)})}).catch(function(){e.$message({type:"warning",message:"已取消删除"})})},handleSizeChange:function(t){},handleCurrentChange:function(t){this.$store.state.loading=!0,this.currentPage=t,this.search(t)},show:function(){this.isShow=!this.isShow},boxHide:function(){this.isShow=!this.isShow,this.resetForm("ruleForm")},showEdit:function(t){var e=this;this.EditShow=!this.EditShow,this.$axios.post("/api/section-list",{id:t}).then(function(i){e.EditForm=i.data.data.data[0],e.deptId=t}).catch(function(t){console.log(t)})},EditHide:function(){this.EditShow=!this.EditShow,this.resetForm("EditForm")},search:function(t){var e=this;this.lists=[];var i={number:10,page:t};"地区"==t?this.content&&this.$set(i,"section_one",this.content):"部门"==t&&this.content&&this.$set(i,"section_two",this.content);var s=[];this.$axios.post("/api/section-list",i).then(function(t){if(null!=t.data.data){for(var i in e.lists=t.data.data.data,e.total=t.data.data.total,e.myShow=!1,t.data.data.data)s.push(t.data.data.data[i].section_two);e.departs=e.unique(s)}else e.myShow=!0,e.total=0;e.lists=t.data.data.data,e.$store.state.loading=!1}).catch(function(t){console.log(t)})},handleRemove:function(t,e){},handleExceed:function(){this.$message.warning("当前限制选择 1 个文件")}},created:function(){this.$store.state.loading=!0,this.getDepartment()}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.$store.state.loading,expression:"$store.state.loading"}],staticClass:"Admin"},[t._m(0),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"AdminContent clearfix"},[i("div",{staticClass:"search clearfix"},[i("div",{staticClass:"searchOne"},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.Choice,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),i("div",{staticClass:"ipt"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{type:"text",placeholder:"请输入查询的关键字"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.search(1)}}}),t._v(" "),i("button",{on:{click:function(e){t.search(t.value)}}},[i("i",{staticClass:"el-icon-search"}),t._v("查询")])]),t._v(" "),i("div",{staticClass:"btn"},[i("el-upload",{staticStyle:{width:"130px",float:"left"},attrs:{action:"/api/section-import","on-remove":t.handleRemove,multiple:"",limit:1,"on-exceed":t.handleExceed,accept:"application/xlsx","auto-upload":""}},[i("button",[i("i",{staticClass:"el-icon-edit-outline"}),t._v("Excel导入")])]),t._v(" "),i("button",{on:{click:t.show}},[t._v("添加部门")])],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"model"},[i("div",{staticClass:"box"},[i("div",{staticClass:"boxHeader"},[i("span",[t._v("添加部门")]),t._v(" "),i("i",{staticClass:"el-icon-close",on:{click:t.boxHide}})]),t._v(" "),i("div",{staticClass:"boxIpt"},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules2,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"地区",prop:"region"}},[i("b",[t._v("*")]),t._v(" "),i("el-input",{model:{value:t.ruleForm.region,callback:function(e){t.$set(t.ruleForm,"region",e)},expression:"ruleForm.region"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"部门",prop:"dept"}},[i("b",[t._v("*")]),t._v(" "),i("el-input",{attrs:{type:"pass","auto-complete":"off"},model:{value:t.ruleForm.dept,callback:function(e){t.$set(t.ruleForm,"dept",e)},expression:"ruleForm.dept"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"modelBtn"},[i("button",{on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")])])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.EditShow,expression:"EditShow"}],staticClass:"modelEdit"},[i("div",{staticClass:"box"},[i("div",{staticClass:"boxHeader"},[i("span",[t._v("编辑部门")]),t._v(" "),i("i",{staticClass:"el-icon-close",on:{click:t.EditHide}})]),t._v(" "),i("div",{staticClass:"boxIpt"},[i("el-form",{ref:"EditForm",staticClass:"demo-ruleForm",attrs:{model:t.EditForm,"status-icon":"",rules:t.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"地区",prop:"section_one"}},[i("b",[t._v("*")]),t._v(" "),i("el-input",{model:{value:t.EditForm.section_one,callback:function(e){t.$set(t.EditForm,"section_one",e)},expression:"EditForm.section_one"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"部门",prop:"section_two"}},[i("b",[t._v("*")]),t._v(" "),i("el-input",{attrs:{type:"pass","auto-complete":"off"},model:{value:t.EditForm.section_two,callback:function(e){t.$set(t.EditForm,"section_two",e)},expression:"EditForm.section_two"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"modelBtn"},[i("button",{on:{click:function(e){t.submitEditForm("EditForm")}}},[t._v("保存")])])])])]),t._v(" "),i("div",{staticClass:"listTable"},[i("table",[t._m(1),t._v(" "),t._l(t.lists,function(e,s){return i("tr",{key:s},[i("td",[t._v(t._s(e.section_one))]),t._v(" "),i("td",[t._v(t._s(e.section_two))]),t._v(" "),i("td",[i("span",{on:{click:function(i){t.showEdit(e.id)}}},[t._v("编辑")]),i("span",[t._v("|")]),t._v(" "),i("span",{on:{click:function(i){t.deltPer(e.id)}}},[t._v("删除")])])])})],2)]),t._v(" "),t.myShow?i("p",{staticStyle:{"font-size":"16px","text-align":"center","margin-top":"40px"}},[t._v("暂无数据")]):t._e(),t._v(" "),i("div",{staticClass:"page"},[i("div",{staticClass:"block"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":10,background:"",layout:"total,prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"AdminTop"},[e("i",[this._v("当前位置：首页")]),this._v(" >\n        "),e("span",[this._v("部门管理")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",[this._v("地区")]),this._v(" "),e("td",[this._v("部门")]),this._v(" "),e("td",[this._v("管理")])])}]};var c=i("VU/8")(r,l,!1,function(t){i("b3Gy")},null,null);e.default=c.exports}});
//# sourceMappingURL=15.728fe0171e096b354fdc.js.map